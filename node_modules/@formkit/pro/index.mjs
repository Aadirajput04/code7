function e(e,o){e in Zo||(Zo[e]={timer:0,inputs:new Set});const n=Zo[e];clearTimeout(n.timer),n.inputs.add(o),n.timer=Ro(t.bind(null,e),500)}function t(e){if(Fo){window.addEventListener(No(),(t=>{const n=new URL(t.blockedURI).hostname;Yo.some(((e,t)=>zo(t)===n))&&(o(e),console.warn("[FormKit]: Enterprise license required for restrictive CSP."))}));let t=0;const n=Uo(Bo),r="://",s=(new Date).getDate(),a=async()=>{Ko(e);const l=Array.from(Zo[e].inputs),i=l.filter((t=>!(Xo[e]&&Xo[e].has(t)))).join("");if(i){t++;try{const a=await window[Uo(Ho)](`${n}${r}${zo((s+t)%Yo.length)}/${function(e){const t=Math.round(9*Math.random());let o="";for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r>=48&&r<=57?r=48+(r+t)%58%48:r>=97&&r<=122&&(r=97+(r+t)%123%97),o+=String.fromCharCode(r)}return`${t}${o}`}(`${e.substring(3)}x${i}`)}`),p=await a.json();if(p[Uo(Vo)])return o(e,p.schema);if(a.ok)return Xo[e]||(Xo[e]=new Set),void l.forEach((t=>Xo[e].add(t)))}catch(e){}t<2&&Ro(a,1e4*Math.random())}};a()}}function o(e,t){qo.add(e),function(e,t){Go[e]&&Go[e].forEach((e=>e(t)))}(e,t)}function n(t,o,n){if(e(o,n),!o)throw new Error("FormKitNoKey");return jo[o]||(jo[o]=Ro((()=>qo.add(o)),3e3)),qo.has(o)?null:t}function r(e,t){return new Array(e).fill("").map(((e,o)=>t(o)))}function s(e){const t=e&&vo(e)&&e.__v_raw;return t?s(t):e}function a(e,t){if(Fo){const o=document.getElementById(e);if(o)return t(o);const n=new MutationObserver((()=>{const o=document.getElementById(e);o&&(n.disconnect(),t(o))}));n.observe(document.body,{childList:!0,subtree:!0})}}function l(e){return ho(e)&&"value"in e&&"label"in e}function i(e){return e?e.reduce(((e,t)=>{var o;return(null===(o=e.at(-1))||void 0===o?void 0:o.type)===t.type?e.at(-1).value+=t.value:e.push({type:t.type,value:t.value}),e}),[]):[]}function p(e,t,o,r){return(...s)=>a=>l=>{const i=function(e,t,o,r,s,a){const l=a[o],i="function"==typeof r?r():{$el:r},p=s.map((e=>"string"==typeof e?e:e(t)(a)));let u=p.length&&i?Mo(i,{children:p}):i;if(u=Mo(u,l),"object"==typeof u){let s=u;if(!xo(u)&&!wo(u)||u.meta||(u.meta={section:o,node:r}),xo(u)){const{$el:r,...a}=u;a.attrs?"class"in a.attrs||"if"in a.attrs||(a.attrs={class:`$classes.${o}`,...a.attrs}):a.attrs={class:`$classes.${o}`},s=d(t,o,Object.defineProperty(a,"$el",{enumerable:!1,get:n.bind(null,r,t,e)}))}else if(wo(u)){const{$cmp:r,...a}=u;s=d(t,o,Object.defineProperty(a,"$cmp",{enumerable:!1,get:n.bind(null,r,t,e)}))}else"$formkit"in u&&(u.outerClass=`$classes.${o}`);return s}return d(t,o,u)}(e,a,t,o,s,l);return r&&ho(i)&&(i.memo=e+JSON.stringify(l)),r?[i]:i}}function d(e,t,o){const n=o=>e?o||`$slots.${t}`:null;return Object.defineProperties({},{if:{enumerable:!1,get:n},then:{enumerable:!1,get:n},else:{enumerable:!1,get:n.bind(null,o)}})}function u(e){return(t,o,n=!1)=>p(e,t,o,n)}function c(e){return{outer:e("outer",nn,!0),wrapper:e("wrapper","div",!1),inner:e("inner",rn,!1),icon:un,label:e("label",sn,!1),prefix:e("prefix",dn,!1),suffix:e("suffix",dn,!1),help:e("help",pn,!1),messages:e("messages",an,!1),message:e("message",ln,!1)}}function f(e){return{overlayPlaceholder:e("overlayPlaceholder",cn),overlayLiteral:e("overlayLiteral",fn),overlayChar:e("overlayChar",mn),overlayEnum:e("overlayEnum",vn),overlay:e("overlay",hn),overlayParts:e("overlayParts",$n),overlayInner:e("overlayInner",gn)}}function m(e,t,o){return n=>r=>{const s="string"==typeof t?t:t(n)(r);return o?{if:e,then:s,else:"string"==typeof o?o:o(n)(r)}:(To(s)?Object.assign(s.else,{if:e}):Lo(s)&&Object.assign(s,{if:e}),s)}}function v(e){return"__original"in e?e.__original:e.value}function h(e,t=!0){e.store.set(wn),e.props.loadingCounter++,e.store.set(ko({key:"hasNextPage",type:"state",value:!1,visible:!1}));const o=e.props.nonceKey&&e.props[e.props.nonceKey],n=e.props.optionsLoader(e.context,bn.get(e)),r=e.props.applyLoadedOptions.bind(null,e,t);return(n instanceof Promise?n.then(((...t)=>{void 0!==e.props.nonceKey&&o!==e.props[e.props.nonceKey]||r(...t)})):Promise.resolve(r(n))).finally((()=>{e.props.loadingCounter--}))}function g(e,t,o){const n=So(o),r=[...n,...[...e.props.options].reverse()].find((e=>{var t;return!(null===(t=e.attrs)||void 0===t?void 0:t.disabled)}));e.props.options=e.props.options.concat(n),t&&r&&(e.props.activeValue=v(r))}function $(e,t){new MutationObserver((()=>{const o=e.props.positionListBox(t);yn.delete(e),y(e,o);let n,r=null;const s=new ResizeObserver((()=>{clearTimeout(n),n=setTimeout((()=>{e.props.styleWrapper(),e.props.positionListBox(t),r||(r=e.on("prop:expanded",(()=>{s.disconnect(),e.off(r)})))}),100)}));s.observe(t)})).observe(t,{childList:!0,subtree:!0})}function y(e,t){if(!e.props.expanded||!e.props.options||!e.props.options.length||yn.has(e))return;const o=e.props.options.reduce(((t,o,n)=>{var r;if(null===(r=o.attrs)||void 0===r?void 0:r.disabled)return t;const s=document.getElementById(`${e.props.id}_listitem_${n}`);return s&&t.push([s,o]),t}),[]),n=document.getElementById(`${e.props.id}_load_more`);n&&o.push([n,e.props.loadMoreOption]),yn.add(e),o.length&&w(e,o,t)}function b(e,t){let o=null;if(e.props.activeDescendant){o=e.props.options.filter((e=>{var t;return!(null===(t=e.attrs)||void 0===t?void 0:t.disabled)})).findIndex((t=>$o(e.value,v(t)))),-1===o&&(o=null);document.getElementById(e.props.activeDescendant)&&k(e)}if("undefined"==typeof window)return o;const n=t.getBoundingClientRect(),r=document.getElementById(`${e.props.id}`);if(r){const t=r.getBoundingClientRect();t.top+t.height+n.height>window.innerHeight&&t.top+t.height>n.height?e.props.dropdownWrapperStyles={...e.props.dropdownWrapperStyles,top:"auto",bottom:"100%"}:e.props.dropdownWrapperStyles={...e.props.dropdownWrapperStyles,bottom:"auto",top:"100%"}}return o}function x(){}function w(e,t,o){var n,r,s;const a=document.getElementById(`${e.props.id}_dropdown_wrapper`);if(e.props.trackHover){const n=a?a.getBoundingClientRect():{top:0,bottom:0};if(o=null,e.props.mouseY>n.top&&e.props.mouseY<n.bottom){let n=o||0,r=o;const s=(t,n)=>{var r;const s=n[0],{y:a,height:l,x:i,width:p}=s.getBoundingClientRect();if(e.props.mouseX>i&&e.props.mouseX<i+p&&e.props.mouseY>a&&e.props.mouseY<a+l){o=t;const s=n[1];return e.props.activeValue=s&&!(null===(r=s.attrs)||void 0===r?void 0:r.disabled)?v(s):void 0,!0}return!1};do{if(null!==n&&s(n,t[n]))break;if(null!==r&&s(r,t[r]))break;null!==n&&(n++,n>t.length-1&&(n=null)),null!==r&&(r--,r<0&&(r=null))}while(null!==n||null!==r)}null===o&&(e.props.activeValue=void 0)}e.props.trackHover||k(e),e.props.expanded?(a&&e.props.loadOnScroll&&!(null===(n=e.store.loading)||void 0===n?void 0:n.value)&&(null===(r=e.store.hasNextPage)||void 0===r?void 0:r.value)&&a.scrollTop+a.offsetHeight>a.scrollHeight-200&&(e.props.allowAppendOptions=!0,null===(s=e.context)||void 0===s||s.handlers.loadMore(!1)),yn.has(e)?requestAnimationFrame(w.bind(null,e,t,o)):y(e,o)):yn.delete(e)}function k(e){const t=document.getElementById(`${e.props.id}_dropdown_wrapper`),o=document.getElementById(e.props.activeDescendant);if(!t||!o)return;const{y:n,height:r}=o.getBoundingClientRect(),{y:s,height:a}=t.getBoundingClientRect();n<s?(e.props.ignoreScroll=!0,t.scrollTop=o.offsetTop):n+r>s+a&&(e.props.ignoreScroll=!0,t.scrollTop=o.offsetTop+r-a)}function _(e,t){e.props.page++,bn.set(e,t),e.store.set(ko({key:"hasNextPage",type:"state",value:!0,visible:!1}))}function D(e){e.props.didLoadMore=!0,setTimeout((()=>{e.props.didLoadMore=!1}),300),h(e)}function E(...e){return t=>{t.addProps(["activeDescendant","activeValue","dropdownWrapperStyles","emptyMessage","expanded","forceExpanded","hasNextPage","isLoadingOption","listboxStyles","loadMoreOption","loadOnScroll","option","optionLoader","options","optionsLoader","page","placeholder","selections","showEmptyMessage"]),t.props.dropdownWrapperStyles={position:"absolute",top:"100%",overflow:"auto",minWidth:"100%"},t.props.page=1,t.props.loadMoreOption={label:"Load more",value:_n},t.props.listboxStyles={},t.props.styleWrapper=x.bind(null,t),t.props.positionListBox=b.bind(null,t),t.props.hasNextPage=_.bind(null,t),t.props.applyLoadedOptions=g,t.props.loadingCounter=0,t.props.optionsLoader||!t.props.options||t.props.options.length||void 0!==t.props.disabled||void 0!==t.props.emptyMessage||(t.props.disabled=!0),t.props.disabled=go(t.props.disabled),t.on("created",(()=>{if(!t.context)return;t.props.trackHover=!0,t.props.loadOnScroll=go(t.props.loadOnScroll),t.props.forceExpanded=go(t.props.forceExpanded),t.props.forceExpanded&&(t.props.expanded=!0),t.context.touch=()=>{var e;null===(e=t.context)||void 0===e||e._value},t.context.handlers.loadMoreSelected=e=>{var o,n;t.props.allowAppendOptions=!0,null===(o=t.context)||void 0===o||o.handlers.loadMore(t),e instanceof MouseEvent&&(t.props.ignoreClickAway=!0,null===(n=document.getElementById(`${t.props.id}`))||void 0===n||n.focus())},t.context.handlers.loadMore=D.bind(null,t),t.context.handlers.click=e=>{if(t.props.disabled)return;document.getElementById(`${t.props.id}`)&&"mouse"!==e.pointerType?(t.props.mouseX=-1,t.props.mouseY=-1):(t.props.mouseX=e.clientX,t.props.mouseY=e.clientY),t.emit("click",e)};const e=t.context.handlers.blur;t.context.handlers.blur=o=>{t.props.expanded?setTimeout((()=>e(o)),300):e(o),t.emit("blur")},t.context.handlers.keydown=e=>{t.props.disabled||(t.props.trackHover=!1,t.emit("keydown",e))},t.context.handlers.selectOption=e=>()=>{t.props.ignoreFocus=!0,t.emit("optionSelected",e)},t.context.fns.isActive=e=>$o(t.props.activeValue,v(e))||void 0,xn&&(a(`${t.props.id}_dropdown_wrapper`,(e=>{"overscroll"!==t.props.behavior&&"none"===getComputedStyle(e).maxHeight&&(t.props.dropdownWrapperStyles={...t.props.dropdownWrapperStyles,maxHeight:"400px"})})),a(`${t.props.id}_dropdown_wrapper`,$.bind(null,t)))})),t.on("prop:expanded",(({payload:e})=>{t.props.dropdownWrapperStyles={...t.props.dropdownWrapperStyles,zIndex:e||t.props.forceExpanded?"999":"-1",pointerEvents:e?"auto":"none"}}));const o=()=>{t.props.ignoreScroll?t.props.ignoreScroll=!1:t.props.trackHover=!0};if(t.on("prop:trackHover",(({payload:e})=>{var n,r;xn&&(e?null===(r=document.getElementById(`${t.props.id}_dropdown_wrapper`))||void 0===r||r.removeEventListener("scroll",o):null===(n=document.getElementById(`${t.props.id}_dropdown_wrapper`))||void 0===n||n.addEventListener("scroll",o))})),t.on("prop:activeValue",(({payload:e})=>{if(e===_n)return void(t.props.activeDescendant=`${t.props.id}_load_more`);const o=t.props.options.findIndex((t=>$o(v(t),e)));t.props.activeDescendant=o>=0?`${t.props.id}_listitem_${o}`:void 0})),"undefined"!=typeof window){const e=e=>{e.target&&e.target instanceof Element&&(e.target.id===t.props.id&&t.props.searchValue||e.target.closest(`#${t.props.id}_listbox`))||t.props.ignoreClickAway?t.props.ignoreClickAway=!1:(t._value||(t.props.searchValue=""),t.props.expanded=!1)},o=e=>{t.props.mouseX=e.clientX,t.props.mouseY=e.clientY;const o=document.getElementById(`${t.props.id}_dropdown_wrapper`);if(o){const n=o.getBoundingClientRect();e.clientX>n.x&&e.clientX<n.x+n.width&&e.clientY>n.y&&e.clientY<n.y+n.height&&(t.props.trackHover=!0)}};t.on("prop:expanded",(({payload:n})=>{n?(setTimeout((()=>document.addEventListener("click",e)),10),t.props.styleWrapper(),document.addEventListener("mousemove",o),t.props.optionsLoader&&0===t.props.options.length&&h(t)):(document.removeEventListener("click",e),document.removeEventListener("mousemove",o))}))}t.on("prop:loadingCounter",(({payload:e})=>{0===e&&t.store.set(kn)})),t.on("prop:options",(({payload:e})=>{t.props.disabled=0===e.length&&!t.props.emptyMessage&&!t.props.optionsLoader&&!t.props.searchValue})),xn&&window.addEventListener("blur",(e=>{e.target===window&&t.props.expanded&&(t.props.expanded=!1)})),e.map((e=>e(t)))}}function T(e,t,o){const n=e.props.optionLoader(t,o),r=e=>"string"==typeof e?{label:e,value:t}:l(e)?e:ho(e)?Object.assign({label:String(t),value:t},e):{label:String(t),value:t},s=t=>(Array.isArray(e.props.memoOptions)&&e.props.memoOptions.push(t),t);return n instanceof Promise?("transferlist"===e.props.type&&(e.props.targetLoading=!0),e.props.loadingCounter++,e.store.set(wn),A(e),n.then((e=>{if("string"==typeof e||l(e))return s(r(e))})).finally((()=>{e.props.targetLoading=!1,e.props.loadingCounter--}))):s(r(n))}function L(e,t){return o=>{o.on("commit",(({payload:n})=>{if(n===Dn.get(o)&&void 0!==Dn.get(o))return;if(Dn.set(o,Array.isArray(n)?[...n]:n),En&&void 0!==n&&"function"==typeof o.props.optionLoader){const r=e(o,n);if(o.props.multiple&&Array.isArray(n))if(n.forEach((e=>{T(o,e,Array.isArray(r)&&r.find((t=>$o(v(t),e))))})),o.props.loadingCounter){o.props.isLoadingOption=!0;const r=o.on("prop:loadingCounter",(()=>{o.props.loadingCounter||(o.props.isLoadingOption=!1,t(o,e(o,n)),o.off(r))}))}else t(o,e(o,n));else if(!o.props.multiple&&!Array.isArray(r)&&n){const e=T(o,n,r);e instanceof Promise?(o.props.isLoadingOption=!0,e.then((e=>{t(o,e,n),o.props.isLoadingOption=!1}))):t(o,e,n)}return}const r=e(o,n);if(!En||r||void 0===n||o.props.options&&o.props.options.length||"function"!=typeof o.props.optionsLoader)t(o,r,n);else{const r=h(o);t(o),r.then((()=>{t(o,e(o,n),n)}))}}))}}function M(e,t){const o=Array.isArray(e.props.options)?e.props.options:[],n=(Array.isArray(e.props.memoOptions)?e.props.memoOptions:[]).concat(o);return!!n.length&&(e.props.multiple?!!Array.isArray(e.value)&&e.value.reduce(((e,t)=>{const o=n.find((e=>$o(t,v(e))));return o&&e.push(o),e}),[]):n.find((e=>$o(v(e),t)))||!1)}function S(e){if(!e.props.options||!e.props.options.length)return;const t=function(e){return e.props.options.find((t=>$o(v(t),e.value)))}(e);if(t)e.props.activeValue=t.value;else{const t=e.props.options.find((e=>{var t;return!(null===(t=null==e?void 0:e.attrs)||void 0===t?void 0:t.disabled)}));e.props.activeValue=null==t?void 0:t.value}}function A(e,t,o){var n;if(e.props.multiple&&Array.isArray(t))return e.props.option={label:t.map((e=>e.label)).join(", "),value:e.value},void(e.props.selections=t);"string"==typeof t?e.props.option={label:t,value:o}:t?e.props.option=t:t||null==o||(null===(n=e.store.loading)||void 0===n?void 0:n.value)?(e.props.option={label:e.props.placeholder||" ",value:void 0,isPlaceholder:!0},e.props.selections=[]):e.props.option={label:o,value:o},e.props.option.isPlaceholder||(e.props.selections=[e.props.option])}function O(e){e.on("keydown",(({payload:t})=>{var o,n;if("Tab"===t.key&&e.props.expanded)t.preventDefault();else if(["ArrowDown","ArrowUp"].includes(t.key)&&e.props.expanded){t.preventDefault(),t.stopPropagation();const n=e.props.options;if(!Array.isArray(n)||!n.length)return;const r=n.reduce(((e,t)=>{var o;return(null===(o=null==t?void 0:t.attrs)||void 0===o?void 0:o.disabled)||e.push(v(t)),e}),[]);(null===(o=e.store.hasNextPage)||void 0===o?void 0:o.value)&&r.push(_n);const s=r.indexOf(e.props.activeValue);-1===s&&r.length?e.props.activeValue=r[0]:"ArrowDown"===t.key&&r.length>s+1?e.props.activeValue=r[s+1]:"ArrowUp"===t.key&&s>0&&(e.props.activeValue=r[s-1])}else if(!e.props.expanded&&["ArrowDown","Up","Down","ArrowUp","Enter"].includes(t.key)&&e.props.id===(null===(n=document.activeElement)||void 0===n?void 0:n.id)){if(e.props.multiple&&e.props.max&&Array.isArray(e.value)&&e.value.length>=e.props.max)return;t.preventDefault(),!e.props.expanded&&e.isSettled&&(e.props.expanded=!0)}else if("Enter"===t.key&&e.props.expanded&&"taglist"!==e.props.type){if(t.preventDefault(),t.stopPropagation(),e.props.activeValue===_n)return void e.emit("optionSelected",e.props.loadMoreOption);const o=e.props.options.find((t=>$o(v(t),e.props.activeValue)));o&&e.emit("optionSelected",o)}else["Esc","Escape"].includes(t.key)?(t.preventDefault(),e.props.expanded=!1):e.emit("unusedKeyDown",t)}))}function C(e){e.on("created",(()=>{e.context&&(e.context.fns.isSelected=t=>$o(e.value,v(t)))})),e.on("prop:expanded",(({payload:t})=>{t&&S(e)})),e.on("optionSelected",(({payload:t})=>{var o,n,r;v(t)!==_n?(null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.disabled)||(e.props.skipNextFilter=!0,e.input(v(t)),e.props.expanded=!1,e.props.id&&(null===(r=document.getElementById(e.props.id))||void 0===r||r.focus())):null===(o=e.context)||void 0===o||o.handlers.loadMore()}))}function I(e){const t=e("dropdownWrapper",(()=>({$el:"div",attrs:{id:'$id + "_dropdown_wrapper"',"data-is-wrapper":!0,style:"$dropdownWrapperStyles",onScroll:"$handlers.scroll"}}))),o=e("listbox",(()=>({$el:"ul",if:"$expanded || $forceExpanded",attrs:{style:"$listboxStyles",id:'$id + "_listbox"',role:"listbox","aria-activedescendant":"$activeDescendant"}}))),n=e("listitem",(()=>({$el:"li",for:["option","index","$options"],bind:"$option.attrs",attrs:{id:'$id + "_listitem_" + $index',"data-disabled":"$option.attrs.disabled","data-value":"$option.value",key:"$option.value",onClick:"$handlers.selectOption($option)",role:"option","aria-selected":"$fns.isSelected($option)","data-is-active":"$fns.isActive($option)"}}))),r=e("loadMore",(()=>({$el:"li",if:"$state.loading || $state.hasNextPage",attrs:{id:'$id + "_load_more"',key:"loadMore",role:"option",onClick:"$handlers.loadMoreSelected","aria-selected":"false","data-is-active":"$fns.isActive($loadMoreOption)"}}))),s=e("loadMoreInner","span"),a=e("emptyMessage",(()=>({$el:"li",if:"$showEmptyMessage && $state.loading !== true",attrs:{id:'$id + "_empty_message"',key:"$emptyMessage",role:"presentation"}}))),l=e("emptyMessageInner","span"),i=e("option",(()=>({$el:"div",attrs:{"data-checked":"$fns.isSelected($option)"}})));return()=>t(o(a(l("$emptyMessage")),n(m("$fns.isSelected($option)",un("selected")),i("$option.label")),r(s(m("$state.loading",un("loader")),"$state.loading && $ui.isLoading.value || $ui.loadMore.value"))))}function B(e){if("undefined"==typeof window)return;const t=document.getElementById(`${e.props.id}_dropdown_wrapper`),o=document.getElementById(`${e.props.id}`);if(!o||!t)return;const n=t.style.paddingTop,r=t.style.paddingBottom,s=t.style.paddingLeft;t.style.paddingTop="0",t.style.paddingBottom="0",t.style.paddingLeft="0";const a=o.getBoundingClientRect(),l=t.getBoundingClientRect(),i=Math.round(a.top-l.top)+"px",p=Math.round(a.left-l.left-5)+"px",d=Math.max(Math.round(Math.min(l.height-l.top,window.innerHeight)-(a.top+a.height)),0)+"px";t.style.paddingTop=n,t.style.paddingBottom=r,t.style.paddingLeft=s,e.props.dropdownWrapperStyles={...e.props.dropdownWrapperStyles,paddingTop:i,paddingLeft:p,paddingBottom:d},e.props.listboxStyles={...e.props.listboxStyles,minWidth:"overscroll"===e.props.behavior?`min(${a.width+"px"}, calc(100vw - 4em))`:a.width+"px",maxWidth:"calc(100vw - 4em)"}}function V(e,t){let o=null;if(e.props.activeDescendant){const n=document.getElementById(e.props.activeDescendant);if(!n)return o;e.props.ignoreScroll=!0;const r=document.getElementById(`${e.props.id}_listbox`);if(!r)return o;const s=t.getBoundingClientRect(),a=r.getBoundingClientRect(),l=parseInt(getComputedStyle(t).paddingTop),i=parseInt(getComputedStyle(t).paddingBottom),p=n.offsetTop-l,d=Math.max(p-l,0),u=Math.max(t.scrollHeight-i-p-s.height,0),c=a.height-d-u;t.scrollTop=p;const f=()=>{t.scrollTop=u>0?u<l?t.scrollHeight:l:d<i?0:p-i},m=Math.min(150,a.height);d>0&&u>0||0===d&&0===u||c>m?t.scrollTop=p:f();t.clientHeight/2<t.scrollTop&&(o=e.props.options.filter((e=>{var t;return!(null===(t=e.attrs)||void 0===t?void 0:t.disabled)})).findIndex((t=>$o(e.value,v(t))))),-1===o&&(o=null)}return o}function H(e){return"radio"===e.props.type&&(e.props.altName=`${e.name}_${Hr++}`),!0}function P(e){return!vo(e)||"__key"in e||"__shim"in e||Object.defineProperty(e,"__key",{enumerable:!1,writable:!0,value:bo()}),e}function N({payload:e}){if(e.props.min=void 0!==e.props.min?Number(e.props.min):1,e.props.max=void 0!==e.props.max?Number(e.props.max):1/0,e.props.min>e.props.max)throw Error("Repeater: min must be less than max");if(e.props.disabled=go(e.props.disabled),Array.isArray(e.value))if(e.value.length<e.props.min){const t=r(e.props.min-e.value.length,(()=>({})));e.input(e.value.concat(t),!1)}else e.value.length>e.props.max&&e.input(e.value.slice(0,e.props.max),!1);else e.input(r(e.props.min,(()=>({}))),!1);e.context&&(e.context.fns.createRemover=e=>()=>{var t,o;null===(t=Do(e))||void 0===t||t.each((e=>e.destroy())),null===(o=Do(e))||void 0===o||o.destroy()},e.context.fns.createInsert=t=>()=>{if(Array.isArray(e.value)){const o=e.value.findIndex((e=>e.__key===t)),n=e.value;n.splice(o+1,0,{}),e.input(n,!1)}},e.context.fns.createShift=(e,t)=>()=>{const o=Do(e);if(!o||!o.parent)return;const n=o.index+t;n>=0&&n<o.parent.children.length&&(o.index=o.index+t)},e.context.fns.createAppend=()=>()=>{if(Array.isArray(e.value)){const t=e.value;t.push({}),e.input(t,!1)}})}function W(e,t){const o=e._c.children.find((e=>e.props.id===t));o&&(o.props.preserve=!0,o.destroy())}function F(e,t,o,n){if(Array.isArray(e)){const r=function(e,t){const o=e.map((e=>e.__key));return t.children.reduce(((e,t,n)=>{const r=t.props.id;return r&&!o.includes(r)&&e.set(n,r),e}),new Map)}(e,t);e.forEach(((s,a)=>{P(s);const[l,i]=function(e,t,o,n,r){if(!o.has(e.__key)&&!e.__shim&&!Object.isFrozen(e)){const s=r&&r.get(t);e.__key=bo();const a=Object.freeze(Object.defineProperties({},{__key:{value:e.__key},__original:{value:e},__index:{value:t},__prevKey:{value:s}}));return o.add(e.__key),n.value++,[!0,a]}return[!1,e]}(s,a,o,n,r);l&&(e.splice(a,1,i),W(t,i.__prevKey),r.delete(a))})),r.size&&r.forEach((o=>{const n=e.findIndex((e=>e.__key===o));-1!==n&&e.splice(n,1),W(t,o)})),Pr.delete(t)}return e}function Y(e,t){t.sort(((e,t)=>"__shim"in e||"__shim"in t?"__shim"in t&&!("__shim"in e)?-1:1:"__index"in e&&"__index"in t?e.__index>t.__index?1:-1:0)),e._c.children.sort(((e,o)=>{const n=t.findIndex((t=>t.__key===e.props.id)),r=t.findIndex((e=>e.__key===o.props.id));return-1!==n&&-1!==r?n>r?1:-1:-1===n&&-1==r?0:n>-1?1:-1}))}function R(e,t){return"group"===t.type&&t.hook.input(((o,n)=>(void 0===o?o={__shim:!0}:(P(o),e.has(o.__key)||o.__shim||!t.parent||Pr.add(t.parent)),n(o)))),!1}function K(e,t,o){void 0===e.props[t]&&(e.props[t]=o)}function j(e,t){var o;if(!e.props.disabled&&t.currentTarget instanceof HTMLElement){let n;t instanceof MouseEvent?n=t.clientX:(n=t.changedTouches[0].clientX,document.documentElement.style.overflow=e.props.initialBodyOverflow);let r=Z(e,n,t.currentTarget)||0;r=r>e.props.min?r:e.props.min,r=r<e.props.max?r:e.props.max,e.input(r),null===(o=document.getElementById(`${e.props.id}`))||void 0===o||o.focus()}}function U(e,t){if(!e.props.disabled&&t.currentTarget instanceof HTMLElement){q(e,Z(e,(window.TouchEvent&&t instanceof TouchEvent||!1)&&t instanceof TouchEvent?t.touches[0].clientX:t instanceof MouseEvent?t.clientX:0,t.currentTarget)||0)}}function z(e){q(e)}function Z(e,t,o){const n=o.getBoundingClientRect();return function(e,t){const o=1/(t||1);return Math.ceil(e*o)/o}((t-n.x)/n.width*e.props.max,e.props.step)}function X(e){setTimeout((()=>{const t=document.getElementById(`${e.props.id}`);t&&(e.props.wrapperWidth=`0 0 ${t.offsetWidth/e.props.max}px`)}))}function q(e,t){let o=0;o=t?Math.round(t/e.props.max*100):"number"==typeof e._value?Math.round(e._value/e.props.max*100):0;const n=100-o;e.props.onWidth=o,e.props.offWidth=n}function G(e,t,o){if(e.props.allowAppendOptions)return e.props.allowAppendOptions=!1,g(e,t,o);const n=So(o);e.props.options=n,e.props.options.length||(e.store.set(kn),e.store.set(ko({key:"hasNextPage",type:"state",value:!1,visible:!1}))),S(e),is.set(e,e.props.searchValue)}function J(e){var t;e.props.max&&e.props.multiple&&Array.isArray(e._value)&&e._value.length>=e.props.max||e.props.disabled||!e.props.optionsLoader&&!e.props.options.length||(e.props.expanded=!e.props.expanded,e.props.expanded&&(null===(t=document.getElementById(`${e.props.id}`))||void 0===t||t.focus()))}function Q(e,t,o=!0){return()=>{e.props.multiple?(e.emit("optionRemoved",t),e.props.searchValue=""):(e.input(void 0),e.props.searchValue=""),o&&setTimeout((()=>{var t;e.props.openOnClick&&(e.props.skipExpand=!0),null===(t=document.getElementById(`${e.props.id}`))||void 0===t||t.focus()}),50)}}function ee(e,t=!1){if("function"==typeof e.props.optionsLoader){if(t&&(e.props.options=[]),e.props.search=e.props.searchValue,clearTimeout(as.get(e)),e.props.skipNextFilter)return void(e.props.skipNextFilter=!1);as.set(e,setTimeout((()=>{var t;e.props.page=1,null===(t=e.context)||void 0===t||t.handlers.loadMore(!0)}),e.props.debounce||200))}else Array.isArray(e.props.options)&&(ss.add(e),"string"==typeof e.props.searchValue&&(e.props.options=e.props.initialOptions.filter((t=>e.props.filter(t,e.props.searchValue,e))),e.props.options.length||e.props.emptyMessage||(e.props.expanded=!1)));e.props.skipNextFilter=!1,S(e)}function te(e,t){var o;const n=e.props.highlightedRange,r=n.index,s=n.start+(r?1:0),a=t.length-1>r?t[t.length-1].end-t[r+1].start:0;return[s,(null===(o=e.props.inputText)||void 0===o?void 0:o.length)-a+(t.length-1>n.index?-1:0)]}function oe(e,t){const o=document.getElementById(`${e.props.id}`);if(o instanceof HTMLInputElement){const n=ps.get(e);if(n){const[e,r]=n,s=t.touches[0].clientX-r;o.scrollLeft=e-s}else ps.set(e,[o.scrollLeft,t.changedTouches[0].clientX])}}function ne(e){ps.delete(e)}function re(e){setTimeout((()=>{document.activeElement&&document.activeElement.id===e.props.id||document.activeElement&&document.activeElement.id===`${e.props.id}_listbox_button`||e.props.expanded&&(e.props.expanded=!1)}),300)}function se(e,t){const o=t.target;e.props.expanded=!(!e.props.optionsLoader&&!e.props.options.length&&!e.props.emptyMessage),e.props.searchValue=o.value,""===e.props.searchValue&&(e.props.options&&!e.props.options.length&&(e.props.expanded=!1),e.input(void 0))}function ae(e,t){const o=t.target;e.props.expanded=!(!e.props.optionsLoader&&!e.props.options.length&&!e.props.emptyMessage);const n=o.value;e.props.inputText=n,""===e.props.inputText&&e.props.options&&!e.props.options.length?e.props.expanded=!1:e.props.expanded=!0,"option"!==e.props.selectionAppearance?""===n?(e.props.searchValue=null,e.input([])):!e._value||Array.isArray(e._value)&&!e._value.length?e.props.searchValue=n:Array.isArray(e._value)&&e._value.length&&(e.props.searchValue=function(e){var t;const o=le(e);if(e.props.highlightedRange){const[t,n]=te(e,o);return e.props.inputText.slice(t,n)}return e.props.inputText.slice((null===(t=o[o.length-1])||void 0===t?void 0:t.end)+2)}(e)):e.props.searchValue=n}function le(e){const t=e.props.getSelections(e,e._value);return Array.isArray(t)&&t.length?t.reduce(((e,o,n)=>{var r;const s=(null===(r=e[n-1])||void 0===r?void 0:r.end)||0;let a=0;return t.length-1!==n&&a++,0!==n&&a++,e.push({option:o,index:n,start:s,end:s+o.label.length+a}),e}),[]):[]}function ie(e){clearTimeout(ls.get(e)),ls.set(e,setTimeout((()=>{var t,o,n;const r=document.getElementById(`${e.props.id}`);if(r instanceof HTMLInputElement){const s=le(e),a=s.findIndex((e=>null!==r.selectionStart?r.selectionStart>=e.start&&r.selectionStart<=e.end:null!==r.selectionEnd&&(r.selectionEnd>=e.start&&r.selectionEnd<=e.end))),l=null===(t=s[s.length-1])||void 0===t?void 0:t.end;if(0===r.selectionStart&&r.selectionEnd===(null===(o=e.props.inputText)||void 0===o?void 0:o.length))return;if("string"==typeof e.props.searchValue&&e.props.highlightedRange){if(s.length){const t=e.props.highlightedRange,[o,n]=te(e,s);if(null!==r.selectionEnd&&(r.selectionEnd<o||r.selectionEnd>n)){const s=t.end-t.start-(n-o),a=r.selectionEnd;e.props.inputText=e.props.option.label,e.props.highlightedRange=void 0,e.props.searchValue=null,r.value=e.props.inputText,r.selectionStart=r.selectionEnd=a+(a>o?s:0)}}}else if(a>=0&&null!==r.selectionStart&&(l!==(null===(n=e.props.inputText)||void 0===n?void 0:n.length)||r.selectionStart<l)){const t=s[a],o=e.props.inputText.substr(0,l),n=t.start+(t.index>0?1:0),i=t.end+(s.length-1>t.index?-1:0);o!==e.props.inputText&&(e.props.inputText=o,r.value=o),e.props.highlightedRange=t,r.selectionStart=n,r.selectionEnd=i}else e.props.highlightedRange=void 0,e.emit("scrollToEnd");if(null!==r.selectionStart&&r.selectionStart>=l&&", "!==e.props.inputText.substring(l,l+2)&&null===e.props.searchValue){let t=e.props.inputText.substring(0,l);t=e.props.multiple&&e.props.max&&Array.isArray(e._value)&&e._value.length>=e.props.max?t:`${t},`,e.props.inputText=`${t} ${e.props.inputText.substring(l).replace(/^[,\s]{1,2}/,"")}`}}}),5))}function pe(e){e.on("prop:option",(()=>{if(Array.isArray(e._value)&&e._value.length>=Number(e.props.max)){const t=document.getElementById(`${e.props.id}`);t&&t.blur()}})),"option"===e.props.selectionAppearance?(e.on("prop:option",(()=>{e.props.inputText="",void 0!==e.props.searchValue&&(e.props.searchValue=null)})),e.on("blur",(()=>{e.props.inputText=""})),e.on("optionSelected",(({payload:t})=>{t.value!==_n&&(!1!==e.props.closeOnSelect&&(e.props.expanded=!1),e.props.searchValue="")}))):function(e){e.props.searchValue=null;const t=(t,o=!1)=>{var n;const r=document.getElementById(`${e.props.id}`);if(!(r instanceof HTMLInputElement))return!1;const s=le(e),a=t>=0?t:s.length-1;if(void 0===s[a])return!1;const l=null===(n=s[a])||void 0===n?void 0:n.end;return null!==r.selectionStart&&(!o||r.selectionStart>=l&&r.selectionStart<=l+2)&&(r.selectionStart=s[a].start+(a>0?1:0),r.selectionEnd=s[a].end+(a<s.length-1?-1:0),!0)};let o;e.on("selectRange",(({payload:e})=>t(...e))),e.on("keydown",(({payload:o})=>{var n,r,s,a;if(["ArrowRight","ArrowLeft"].includes(o.key)&&o.target instanceof HTMLInputElement&&null!==o.target.selectionEnd&&null!==o.target.selectionStart){if(0===o.target.selectionStart&&o.target.selectionEnd===(null===(n=e.props.inputText)||void 0===n?void 0:n.length))"ArrowLeft"===o.key?t(0):t(-1);else if(!e.props.searchValue){e.props.searchValue=null;const t=le(e),n=null===(r=t[t.length-1])||void 0===r?void 0:r.end;o.target.selectionStart<n&&(o.target.selectionStart=Math.max(0,"ArrowLeft"===o.key?o.target.selectionStart-2:o.target.selectionEnd+2))}}else["Delete","Backspace"].includes(o.key)?e.props.highlightedRange&&!e.props.searchValue?e.emit("optionRemoved",e.props.highlightedRange.option):o.target instanceof HTMLInputElement&&(e.props.searchValue=null,t(-1,!0)&&o.preventDefault()):o.target instanceof HTMLInputElement&&0===o.target.selectionStart&&o.target.selectionEnd===(null===(s=e.props.inputText)||void 0===s?void 0:s.length)&&(null===(a=e.props.inputText)||void 0===a?void 0:a.length)&&0===e.props.selections.length&&o.preventDefault();"ArrowLeft"===o.key&&t(-1,!0)&&o.preventDefault(),ie(e)})),e.on("prop:highlightedRange",(({payload:t})=>{e.props.hasHighlightedRange=!!t,t&&e.props.expanded&&o!==t.option&&(o=t.option,e.props.activeValue=v(t.option))})),e.on("scrollToEnd",(()=>{const t=document.getElementById(`${e.props.id}`);t&&t.scrollTo({left:t.scrollWidth,behavior:"smooth"})})),e.on("prop:option",(({payload:t})=>{if(!t.isPlaceholder){let o="";if(us){const t=document.getElementById(`${e.props.id}`);if(document.activeElement===t&&Array.isArray(e._value)&&e._value.length){if(e.props.max&&e._value.length>=Number(e.props.max))return;o=", "}}!1!==e.props.closeOnSelect&&(e.props.expanded=!1),e.props.inputText=t.label+o}})),e.on("blur",(()=>{if(e._value){const t=e.props.option;ho(t)&&void 0!==t.value?e.props.inputText=t.label:e.props.inputText=""}else e.props.inputText=""}))}(e),e.on("commit",(()=>{void 0!==e.props.searchValue&&(e.props.searchValue=null)})),e.on("created",(()=>{if("option"!==e.props.selectionAppearance&&function(e){a(`${e.props.id}`,(t=>{t instanceof HTMLInputElement&&ds.set(t,e)})),us&&!cs&&(cs=!0,document.addEventListener("selectionchange",(()=>{if(document.activeElement instanceof HTMLInputElement&&ds.has(document.activeElement)){const e=ds.get(document.activeElement);e&&ie(e)}})))}(e),e.props.option&&Array.isArray(e.props.option.value))for(const t of e.props.option.value)e.props.initialOptions.find((o=>{v(o)===t&&e.props.memoOptions.push(o)}));e.context&&(e.context.handlers.input=ae.bind(null,e))})),e.on("optionRemoved",(async({payload:t})=>{if(Array.isArray(e._value)){let o=-1;await e.input(e._value.filter(((e,n)=>e!==v(t)&&!$o(e,v(t))||(o=n,!1)))),e._value.length?setTimeout((()=>e.emit("selectRange",[o])),20):e.props.expanded=!1}})),e.on("prop:expanded",(({payload:t})=>{t||(e.props.searchValue="")}))}function de(e){return t=>{let o;t.addProps(["inputText","selectionAppearance","searchValue","openOnClick","filteredOptions","search","debounce","showInput","visibilityStyles","selectionStyles","multiple","filter","hasHighlightedRange"]),t.props.memoOptions=[],t.props.initialOptions=t.props.options,t.props.applyLoadedOptions=G,t.props.getSelections=e,t.props.nonceKey="searchValue",t.props.multiple=go(t.props.multiple),t.props.selectionAppearance="option"===t.props.selectionAppearance?"option":"text-input","function"!=typeof t.props.filter&&(t.props.filter=(e,t)=>e.label.toLowerCase().includes(t.toLowerCase())),t.props.selectionStyles={position:"absolute",pointerEvents:"none",width:"100%",left:"0",top:"0",bottom:"0",opacity:"0",overflow:"hidden"},t.props.multiple?(t.addProps(["max","closeOnSelect"]),function(e){function t(t){return!!Array.isArray(e.value)&&e.value.some((e=>$o(e,v(t))))}e.on("created",(()=>{e.context&&(e.context.fns.isSelected=t)})),e.on("optionSelected",(({payload:o})=>{var n,r,s;if(v(o)===_n)return void(null===(n=e.context)||void 0===n||n.handlers.loadMore());if(null===(r=null==o?void 0:o.attrs)||void 0===r?void 0:r.disabled)return;const a=Array.isArray(e._value)?e._value:[];t(o)?e.emit("optionRemoved",o):(e.props.memoOptions=[...e.props.memoOptions,o],e.props.highlightedRange?(a.splice(e.props.highlightedRange.index,1,v(o)),e.input(a),e.props.highlightedRange=void 0,e.props.expanded=!1):(e.input(a.concat(v(o))),e.emit("scrollToEnd"))),e.props.id&&(null===(s=document.getElementById(e.props.id))||void 0===s||s.focus())}))}(t),pe(t)):(C(t),function(e){e.props.searchValue="",e.on("created",(()=>{e.context&&(e.context.handlers.input=se.bind(null,e))})),e.on("input",(({payload:t})=>{const o=e.props.getSelections(e,t);e.props.searchValue=o&&(null==o?void 0:o.label)||e.props.searchValue,e.props.selectionStyles={...e.props.selectionStyles,opacity:void 0===t?"0":"1",pointerEvents:void 0===t?"none":"auto"}})),e.on("optionSelected",(({payload:t})=>{t.value!==_n&&(e.props.expanded=!1)})),e.on("prop:option",(({payload:t})=>{ho(t)&&!t.isPlaceholder?e.props.searchValue=t.label:t.isPlaceholder&&(e.props.searchValue="")})),e.on("blur",(()=>{setTimeout((()=>{var t;if(e.props.didLoadMore)return e.props.didLoadMore=!1,void(null===(t=document.getElementById(`${e.props.id}`))||void 0===t||t.focus());if(e._value){const t=e.props.option;ho(t)&&void 0!==t.value?e.props.searchValue=t.label:e.props.searchValue=""}else e.props.searchValue=""}),150)}))}(t)),t.on("prop:options",(({payload:e})=>{e&&e.length?t.props.showEmptyMessage=!1:e&&!e.length&&t.props.searchValue&&t.props.emptyMessage&&(t.props.showEmptyMessage=!0),"function"!=typeof t.props.optionsLoader&&(ss.has(t)?ss.delete(t):(t.props.initialOptions=[...e],setTimeout((()=>ee(t)),0)))})),t.on("click",(()=>{t.props.openOnClick&&(t.props.trackHover=!1,t.props.ignoreClickAway=!0,t.props.expanded=!0)})),t.on("focus",(()=>{if(t.props.ignoreFocus)t.props.ignoreFocus=!1;else if(t.props.openOnClick){if(t.props.trackHover=!1,t.props.ignoreClickAway=!0,t.props.skipExpand)return void(t.props.skipExpand=!1);t.props.expanded=!0}})),t.on("created",(()=>{t.props.openOnClick=go(t.props.openOnClick),t.context&&(t.context.handlers.toggleListbox=J.bind(null,t),t.context.handlers.removeSelection=Q.bind(null,t),t.context.handlers.touchmove=oe.bind(null,t),t.context.handlers.touchend=ne.bind(null,t),t.context.handlers.focusOut=re.bind(null,t),t.context.handlers.focus=()=>{if(t.emit("focus"),document&&t.props.multiple&&"option"!==t.props.selectionAppearance){const e=new Event("selectionchange");document.dispatchEvent(e)}})})),t.on("keydown",(({payload:e})=>{"option"!==t.props.selectionAppearance||!t._value||t.props.isLoadingOption||t.props.multiple||(["Backspace","Delete"].includes(e.key)||"Tab"!==e.key)&&e.preventDefault()})),t.on("prop:expanded",(({payload:e})=>{e&&t.props.searchValue?ee(t):e||is.delete(t)})),t.on("prop:searchValue",(({payload:e})=>{t.props.multiple||(t.props.inputText=e),!1==!!e&&!1==!!o||(e!==o&&ee(t),null!==o&&null===e&&!1!==t.props.closeOnSelect&&(t.props.expanded=!1),o=e)}))}}function ue(e,t=[],o,n){function r(e){if(e.currentTarget&&e.currentTarget instanceof HTMLElement&&e instanceof DragEvent&&e.dataTransfer){e.dataTransfer.dropEffect="move";const t=e.currentTarget.parentNode;if(!t)return;const o=ms.get(t),r=e.currentTarget;r.id="dropZone";const s=t.children;if(s&&s instanceof HTMLCollection)for(let e=0;e<s.length;e++)if(s[e]instanceof HTMLElement){const t=s[e];if(n&&!n(t))continue;fs.set(t,{value:o[e],index:e})}const a=fs.get(r);i=a.index,p=a.value,setTimeout((function(){const e=document.getElementById("dropZone");e&&e.classList.add("dropZone")}),1)}}function s(t){if(t.preventDefault(),t instanceof DragEvent&&t.relatedTarget!==t.currentTarget&&t.currentTarget&&t.currentTarget instanceof HTMLElement){const o=fs.get(t.currentTarget),n=o.index,r=t.currentTarget;if(p===o.value)return;const s=document.getElementById("dropZone");r&&e&&s&&(n<i?e.insertBefore(s,r):e.insertBefore(s,r.nextSibling),i=n,p=o.value)}}function a(){const t=document.getElementById("dropZone"),r=null==t?void 0:t.parentNode;if(r&&e===r&&(r.removeEventListener("drop",a),t&&t.parentNode)){t.classList.remove("dropZone"),t.removeAttribute("id");const e=[],s=r.children;if(s&&s instanceof HTMLCollection){for(let t=0;t<s.length;t++)if(s[t]instanceof HTMLElement){const o=s[t];if(n&&!n(o))continue;const r=fs.get(o);e.push(r.value)}ms.set(r,e),o&&o(e)}}}function l(e){e.preventDefault(),a()}let i=0,p=null;if(vs.has(e))ms.set(e,t),e.addEventListener("drop",a);else{const o=new MutationObserver((function(){const o=e,a=[];for(let e=0;e<o.children.length;e++){const t=o.children[e];(n&&n(t)||!n)&&a.push(t)}a.forEach(((e,o)=>{const n=fs.get(e);t&&(n?fs.set(e,{value:n.value,index:o}):fs.set(e,{value:t[o],index:o})),e.setAttribute("draggable","true"),e.setAttribute("tabindex","0"),e.addEventListener("dragstart",r),e.addEventListener("dragend",l),e.addEventListener("dragenter",s)}))}));o.observe(e,{childList:!0}),e.addEventListener("drop",a),document.addEventListener("drop",a),vs.add(e);const i=[];for(let t=0;t<e.children.length;t++){const o=e.children[t];(n&&n(o)||!n)&&i.push(o)}const p=[];for(let e=0;e<i.length;e++)i[e].setAttribute("draggable","true"),i[e].setAttribute("tabindex","0"),i[e].addEventListener("dragstart",r),i[e].addEventListener("dragend",l),i[e].addEventListener("dragenter",s),fs.set(i[e],{value:t[e],index:e}),p.push(t[e]?t[e]:e);ms.set(e,p)}document.addEventListener("dragover",(function(e){e.preventDefault()}))}function ce(e){function t(t){e.input(t)}function o(t){e.props.selectedTagValue=t.value}let n;e.addProps(["disableDragAndDrop","allowNewValues","multiple","max"]),e.props.disableDragAndDrop=go(e.props.disableDragAndDrop),"taglist"===e.props.type?(e.props.multiple=!0,e.props.selectionAppearance="option",e.props.allowNewValues=go(e.props.allowNewValues),n=e=>e.classList.contains("formkit-tag-wrapper")):"autocomplete"===e.props.type&&(n=e=>e.classList.contains("formkit-selection")),e.on("created",(()=>{e.context&&(e.context.handlers.selectTag=e=>o.bind(null,e))})),e.on("prop:loadingCounter",(({payload:o})=>{0===o&&hs&&!e.props.disableDragAndDrop&&setTimeout((()=>{const o=document.getElementById(`${e.props.id}_selections`);o&&!0===e.props.multiple&&ue(o,e._value,t,n)}))})),e.on("commit",(({payload:o})=>{if(e.context&&hs){const r=e.props.id;if(hs&&r&&!e.props.disableDragAndDrop){const r=document.getElementById(`${e.props.id}_selections`);if(!r||!0!==e.props.multiple)return;ue(r,o,t,n)}}})),e.on("keydown",(({payload:t})=>{if(t.currentTarget instanceof HTMLElement&&document.activeElement instanceof HTMLElement&&["ArrowRight","ArrowLeft"].includes(t.key)&&t.altKey){t.stopPropagation(),t.preventDefault();const o=document.activeElement,n=e.props.selections.find((t=>t.value===e.props.selectedTagValue)),r=e.props.selections.findIndex((t=>t.value===e.props.selectedTagValue));"ArrowRight"===t.key?r<e.props.selections.length-1&&(e.props.selections.splice(r,1),e.props.selections.splice(r+1,0,n)):"ArrowLeft"===t.key&&r>0&&(e.props.selections.splice(r,1),e.props.selections.splice(r-1,0,n)),A(e,e.props.selections),e.input(e.props.selections.map((e=>e.value))),setTimeout((()=>{o.focus()}))}else if(t.target instanceof HTMLElement&&document.activeElement&&document.activeElement instanceof HTMLElement&&["ArrowRight","ArrowLeft"].includes(t.key)){if("ArrowRight"===t.key){const o=t.target.nextElementSibling;if(o&&o instanceof HTMLElement&&o.getAttribute("data-value"))e.props.selectedTagValue=o.getAttribute("data-value"),o.focus();else if(o&&o instanceof HTMLElement&&o.id===e.props.id){const t=document.getElementById(e.props.id);t&&t.focus()}}else if("ArrowLeft"===t.key){const o=t.target.previousElementSibling;o&&o instanceof HTMLElement&&o.getAttribute("data-value")&&(e.props.selectedTagValue=o.getAttribute("data-value"),o.focus())}}else if("Enter"===t.key&&t.currentTarget&&t.currentTarget instanceof HTMLInputElement&&t.currentTarget.id===e.props.id&&"taglist"===e.props.type){if(t.preventDefault(),e.props.activeValue===_n)return void e.emit("optionSelected",e.props.loadMoreOption);const o=e.props.options.find((t=>$o(v(t),e.props.activeValue)));o&&e.props.expanded?e.emit("optionSelected",o):e.props.allowNewValues&&e.props.inputText&&e.emit("optionSelected",{value:e.props.inputText,label:e.props.inputText})}else if(t.currentTarget&&t.currentTarget instanceof HTMLElement&&t.currentTarget.id!==e.props.id&&["Backspace"].includes(t.key)&&document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.id!==e.props.id){const t=e.props.selections.findIndex((t=>t.value===e.props.selectedTagValue));if(-1===t)return;if(0===t&&1===e.props.selections.length)Q(e,e.props.selections[t],!0)();else if(t===e.props.selections.length-1){Q(e,e.props.selections[t],!0)(),e.props.selectedTagValue=e.props.selections[t-1].value;const o=document.activeElement.previousElementSibling;if(o){const e=o.getAttribute("data-value");o&&o instanceof HTMLElement&&setTimeout((()=>{const t=document.querySelector(`[data-value="${e}"]`);t&&t instanceof HTMLElement&&t.focus()}),50)}}else{e.props.selectedTagValue=e.props.selections[t+1].value,Q(e,e.props.selections[t],!1)();const o=document.activeElement.nextElementSibling;if(o&&o instanceof HTMLElement){const e=o.getAttribute("data-value");e&&setTimeout((()=>{const t=document.querySelector(`[data-value="${e}"]`);t&&t instanceof HTMLElement&&t.focus()}),50)}}}else if(["ArrowLeft"].includes(t.key)&&t.currentTarget&&t.currentTarget instanceof HTMLInputElement&&0===t.currentTarget.selectionStart&&0===t.currentTarget.selectionEnd){if(t.stopPropagation(),0===e.props.selections.length)return;e.props.selectedTagValue=e.props.selections[e.props.selections.length-1].value;const o=t.currentTarget.previousElementSibling;o&&o instanceof HTMLElement&&o.focus()}else if(["Backspace"].includes(t.key)&&t.currentTarget&&t.currentTarget instanceof HTMLInputElement&&0===t.currentTarget.selectionStart&&0===t.currentTarget.selectionEnd&&e.props.selections.length>0){t.stopPropagation(),e.props.selectedTagValue=e.props.selections[e.props.selections.length-1].value;const o=t.currentTarget.previousElementSibling;o&&o instanceof HTMLElement&&o.focus()}}))}function fe(e,t){var o;if(Aa.has(e))return;Aa.set(e,[]),t.reverse&&Ka.add(e),t.prefix&&ja.set(e,t.prefix),t.suffix&&Ua.set(e,t.suffix),$e(e,t.pattern,t.partOverrides);const n=Ba.get(e),r=null==n?void 0:n.some((e=>xe(e))),s=null==n?void 0:n.some((e=>function(e){return!!e&&("group"===e.type&&Array.isArray(e.parts))}(e)));if(r&&s)throw new Error("Cannot use enums and groups in the same mask.");const a=r?"select":null!==(o=t.mode)&&void 0!==o?o:"shift";if(s&&"select"===a)throw new Error("Cannot use groups in select mode.");(t.placeholder||"select"===a)&&Va.add(e),Ha.set(e,a),t.onChange&&Ya.set(e,t.onChange),e.addEventListener("beforeinput",(o=>{if(el)return;if(o.inputType.startsWith("history"))return function(e,t){e.addEventListener("input",(o=>{var n;o.preventDefault(),o.stopImmediatePropagation();const r=Aa.get(e);if(null==r?void 0:r.length){const o=(null!==(n=Oa.get(e))&&void 0!==n?n:r.length-1)+(t.endsWith("Undo")?-1:1),s=r[o];if(!s)return;Oe(e,s),e.setSelectionRange(...s.selectionAfter),Oa.set(e,o),Ya.has(e)&&Ya.get(e)(s,e)}}),{once:!0})}(e,o.inputType);o.preventDefault();const n=(r=o.inputType).startsWith("insert")?"insert":!!r.startsWith("delete")&&("deleteContentForward"===r?"deleteContentForward":"deleteContentBackward");var r;const s=De(e),a=e.value;n&&Ee(e,{type:n,selectionBefore:s,data:o.data,valueBefore:a,suffix:t.suffix,prefix:t.prefix})})),"select"===a&&e.addEventListener("keydown",(t=>{switch(t.key){case"ArrowRight":return t.preventDefault(),tt(e);case"ArrowLeft":return t.preventDefault(),tt(e,-1);case"ArrowUp":return void(ot(e,1)&&t.preventDefault());case"ArrowDown":return void(ot(e,-1)&&t.preventDefault());case"Tab":return Xa?void t.preventDefault():void(tt(e,t.shiftKey?-1:1)&&t.preventDefault())}})),e.addEventListener("focus",(()=>function(e){var t;const o=Va.has(e),n=Ha.get(e);if(o){let o=null,r=null,s=!1;const a="shift"===n?0:1,l=e.value;Ye(e,{type:"insert",data:l,selectionBefore:[0,0,"none"],valueBefore:l},"shift"===n?"":l,((e,t)=>(null===o&&"char"===t.type&&(o=e.pos-a),(be(t)||xe(t))&&e.value.endsWith(t.placeholder)?(r=e.pos-a,!1):("char"===t.type&&(s=!0),!0))));const i=null!==(t=null!=r?r:s?l.length:o)&&void 0!==t?t:null;if(null!==i){let t=[i,i,"none"];if("select"===Ha.get(e)){const[o]=qe(e),n=rt(e,t);void 0!==n&&n in o&&(t=o[n])}return function(e,t,o=50){Na.set(e,Le(e,t));const n=async()=>{if(!Qa||document.activeElement!==e)return;"select"===Ha.get(e)&&(await new Promise((e=>setTimeout(e,10))),function(e){let t=De(e);if(t[0]===t[1]&&0===t[0]||e.value.length===t[1]&&0===t[0])return;t=Me(e,t);const[o]=qe(e),n=rt(e,t),r=t[0];void 0!==n&&o.some((e=>r>=e[0]&&r<e[1]))&&Na.set(e,Le(e,o[n]))}(e));const t=Na.get(e);t&&e.setSelectionRange(...t)};n(),document.addEventListener("selectionchange",n),setTimeout((()=>{document.removeEventListener("selectionchange",n),Na.delete(e)}),o)}(e,t)}}}(e))),e.addEventListener("selection",(t=>function(e,t){if(Na.get(e))return;it(e),t=Me(e,t);const[o]=qe(e),n=rt(e,t),r=void 0!==n&&Le(e,o[n]);r&&!_e(t,r)&&Ae(e,r,!0)}(e,t.detail))),Ee(e,{type:"insert",selectionBefore:[0,0,"forward"],data:e.value,valueBefore:"",suffix:t.suffix,prefix:t.prefix})}function me(e){var t,o;if(Za.has(e))return;const n=null!==(t=Aa.get(e))&&void 0!==t?t:[],r=n[null!==(o=Oa.get(e))&&void 0!==o?o:n.length-1];if(r){const t=r.selectionAfter,[o,n]=qe(e,r.valueAfter),s=rt(e,t,[o,n]);if(void 0!==s&&s in o){const r=n[s],a=o[s],l=[t[0]-a[0],t[1]-a[0],"none"];Za.set(e,[r,l])}}}function ve(e){Za.delete(e)}function he(e,t){const o="string"==typeof e||!Aa.has(e),n="string"==typeof e?ge(e):e;if(o)t.prefix&&ja.set(n,t.prefix),t.suffix&&Ua.set(n,t.suffix),n.value=Te(n,n.value),fe(n,t);else{const e=n.value;n.value="",Ee(n,{type:"insert",selectionBefore:[0,0,"none"],valueBefore:"",data:e,suffix:t.suffix,prefix:t.prefix})}return n.value}function ge(e){return{value:e,selectionStart:0,selectionEnd:0,scrollWidth:0,clientWidth:0,addEventListener:()=>{},dispatchEvent:()=>{},setSelectionRange:()=>{}}}function $e(e,t,o,n,r){r=e&&Ka.has(e)||r;const s=(null!=n?n:function(e){const t=Object.values(Ga);if(!e)return t;const o={...e},n=[];for(const r of t)if(!ke(r))if("token"in r&&r.token in e){const t={...r,...e[r.token]};ye(t)&&n.push(t),delete o[r.token]}else n.push(r);const r=Object.values(o);for(const e of r)ye(e)?n.push(e):console.warn(`Invalid ${e.type} token`,e);return n}(o)).sort(((e,t)=>{const o="token"in e?e.token.length:-1,n="token"in t?t.token.length:-1;return o===n?0:o>n?-1:1}));let a=[];[t,a]=function(e,t,o,n){let r,s=0,a="",l="",i="";const p=[];for(;a=Ce(e);)a===t&&r!==n?(s++,s>1&&(i+=a)):a===o&&s&&r!==n?(s--,0===s?(l+=`{$${p.length}}`,p.push(i),i=""):i+=a):s?i+=a:r!==n||a!==t&&a!==o?l+=a:l=`${l.substring(0,l.length-1)}${a}`,r=a,e=e.substring(a.length);return[l,p]}(t,"{","}","\\");const l=a.length;t=s.reduce(((e,t,o)=>"token"in t?e.replaceAll(`\\${t.token}`,"{“!”}").replaceAll(t.token,`{$${l+o}}`).replaceAll("{“!”}",t.token):e),t);const i=function(e,t,o){return e.reduce(((e,n)=>{const[r,s]=function(e){const[t,...o]=e.split("|"),n=o.reduce(((e,t)=>{const[o,n=!0]=t.split(":");return Object.assign(e,{[o]:n})}),{});return[t,n]}(n);let a=$e(null,r,void 0,t,o);a=a.map((e=>{const t={...e};if("char"===t.type&&s.placeholder)t.placeholder=s.placeholder;else if("enum"===t.type)throw new Error("Groups cannot contain enums.");return t}));const l={type:"group",parts:a,...s};return e.push(l),e}),[])}(a,s,r).concat(s),p=/\{\$\d+\}/g,d=t.match(p),u=t.split(p).reduce(((e,t,o)=>{if(t&&e.push({type:"literal",value:r?[...t].reverse().join(""):t}),d&&d[o]){const t=d[o],n=Number(t.substring(2,t.length-1));!isNaN(n)&&i[n]&&e.push(i[n])}return e}),[]);return r&&u.reverse(),e&&Ba.set(e,u),u}function ye(e){return!!e&&(ke(e)||be(e)||xe(e))}function be(e){return!!e&&("char"===e.type&&e.pattern instanceof RegExp&&we(e))}function xe(e){return!!e&&("enum"===e.type&&Array.isArray(e.values)&&we(e))}function we(e){return!!e&&("placeholder"in e&&"token"in e)}function ke(e){return!!e&&("literal"===e.type&&"string"==typeof e.value)}function _e(e,t){return e===t||void 0!==e&&void 0!==t&&(e[0]===t[0]&&e[1]===t[1])}function De(e){var t,o;return[null!==(t=e.selectionStart)&&void 0!==t?t:e.value.length,null!==(o=e.selectionEnd)&&void 0!==o?o:e.value.length,"none"]}function Ee(e,t){var o;Ka.has(e)&&lt(t);let n=!1;switch(Ra.set(e,"playing"),t.type){case"insert":n=function(e,t){let o=Se(t);const n=t.selectionBefore,r=function(e,t){var o,n,r;if("select"===Ha.get(e)){const[s,a]=qe(e),l=s.findIndex((e=>_e(e,t.selectionBefore))),i=null!==(o=a[l])&&void 0!==o?o:null;if(be(i)){const e=t.selectionBefore,o=e[1]-e[0],s=t.valueBefore.substring(e[0],e[1]),a="left"===i.selectDirection,l=We(s,i),p=a?0:function(e,t,o){if(!e)return 0;let n="";for(;e.length;){const o=Ce(e);e=e.substring(o.length),t.pattern.test(o)&&(n+=o)}return Math.min(Math.max(n.length,1),o)}(t.data,i,o);if(l.length>=o)return a||(t.insertPos=e[1]-p),(null!==(n=i.selectFill)&&void 0!==n?n:i.placeholder).repeat(o);const d=(null!==(r=i.selectFill)&&void 0!==r?r:i.placeholder).repeat(o-l.length-(a?0:p));return t.insertPos=a?e[0]+l.length:e[1]-p,"left"===i.selectDirection?`${l}${d}`:`${d}${l}${i.placeholder}`}if(xe(i)){const e=t.selectionBefore;return t.valueBefore.substring(e[0],e[1])}}return""}(e,t);o=`${o.substring(0,n[0])}${r}${o.substring(n[1])}`;const s=Ye(e,t,o);return Ia.set(e,s.endPos),{...t,valueAfter:s.value,selectionAfter:Fe(e,s),unmasked:s.unmasked,complete:s.complete,meta:s.meta}}(e,t);break;case"deleteContentBackward":case"deleteContentForward":n=function(e,t){const o=Se(t),n=t.selectionBefore,r=Ka.has(e);let s=n[0],a=n[1];s===a&&("deleteContentBackward"!==t.type||r?a+=Ie(o,s):s-=Ie(o,s,"backward"));const l=Ha.get(e);let i="";if("select"===l){const[o,n]=qe(e),r=rt(e,[s,a,"none"]);if(void 0!==r){const l=n[r],p=o[r];be(l)?i=l.placeholder.repeat(a-s):xe(l)&&([i,s]=_e(p,De(e))?[l.placeholder,s]:function(e,t,o,n){const r=n.valueBefore,s=Ie(r,n.selectionBefore[0],"backward"),a=Math.max(o[0],n.selectionBefore[0]-s),l=r.substring(o[0],a),i=Je(t.values,l);let p=null==i?void 0:i.substring(l.length);i&&!p&&Qe(t.values,i)&&(p=i);return[null!=p?p:t.placeholder,p?a:o[0]]}(0,l,p,t))}}const p=`${o.substring(0,s)}${i}${o.substring(a)}`,d=Ye(e,t,p);return{...t,valueAfter:d.value,selectionAfter:ze(e,d,t,s),unmasked:d.unmasked,complete:d.complete,meta:d.meta}}(e,t)}if(Ka.has(e)&&n&&lt(n),n&&function(e,t){t.prefix&&(t.valueAfter=t.prefix+t.valueAfter,t.selectionAfter=Le(e,t.selectionAfter));t.suffix&&(t.valueAfter+=t.suffix)}(e,n),n&&function(e){return e.valueBefore!==e.valueAfter||e.selectionBefore[0]!==e.selectionAfter[0]||e.selectionBefore[1]!==e.selectionAfter[1]}(n)){Ya.has(e)&&za.set(e,(()=>{za.delete(e),n&&Ya.get(e)(n,e)})),Ra.set(e,"beforeCallback");let t=null!==(o=Aa.get(e))&&void 0!==o?o:[];const r=Oa.get(e);r&&(t=t.slice(0,r),Oa.delete(e)),t.push(n),Aa.set(e,t),Qa&&document.activeElement===e&&"function"==typeof document.execCommand&&!el?(Ae(e,[0,e.value.length,"forward"],!0),el=!0,document.execCommand("insertText",void 0,n.valueAfter),el=!1):Oe(e,n),Qa&&document.activeElement===e&&Ae(e,n.selectionAfter);const s=za.get(e);s&&s(),it(e)}Ra.set(e,"complete")}function Te(e,t){var o,n;const r=null!==(o=ja.get(e))&&void 0!==o?o:"",s=null!==(n=Ua.get(e))&&void 0!==n?n:"";return r&&t.startsWith(r)&&(t=t.substring(r.length)),s&&t.endsWith(s)&&(t=t.substring(0,t.length-s.length)),t}function Le(e,t){const o=ja.get(e),n=[...t];return o&&(n[0]+=o.length,n[1]+=o.length),n}function Me(e,t){const o=ja.get(e),n=[...t];return o&&(n[0]-=o.length,n[1]-=o.length),n}function Se(e){let t=e.valueBefore;const o=e.selectionBefore;if(e.suffix&&t.endsWith(e.suffix)&&(t=t.substring(0,t.length-e.suffix.length),e.valueBefore=t,o[0]>=t.length&&(o[0]=t.length),o[1]>=t.length&&(o[1]=t.length)),e.prefix&&t.startsWith(e.prefix)){const n=e.prefix.length;t=t.substring(n),e.valueBefore=t,o[0]=Math.max(o[0]-n,0),o[1]=Math.max(o[1]-n,0)}return t}function Ae(e,t,o=!1){o&&(Ca.add(e),setTimeout((()=>Ca.delete(e)),5)),Na.get(e)&&Na.set(e,t),e.setSelectionRange(...t)}function Oe(e,t,o="After"){if(e.value=t[`value${o}`],Qa){const o=new InputEvent("input",{inputType:"insert"===t.type?"insertText":t.type,data:t.data});e.dispatchEvent(o)}}function Ce(e){if(null==e)return"";const t=Pa.test(e.charAt(0))&&Pa.test(e.charAt(1))?2:1;return e.substring(0,t)}function Ie(e,t,o="forward"){if("backward"===o)return 0===t?0:1===t?1:Pa.test(e.charAt(t))&&Pa.test(e.charAt(t-1))?2:1;const n=e.length-t;return 0===n?0:1===n?1:Ce(e.substring(t)).length}function Be(e,t){const o=Ce(e.data),n=o.length;if(e.value+=o,e.pos+=n,"string"==typeof e.data&&(e.data=e.data.substring(n),e.data.length||(e.endPos=e.pos)),t)return t.substring(n)}function Ve(e){const t=Ce(e.buffer),o=t.length;e.value+=t,e.pos+=o,e.buffer=e.buffer.substring(o)}function He(e,t){const o=Ce(t),n=o.length;return e.value+=o,e.pos+=n,t.substring(n)}function Pe(e,t){for(;t.buffer;){const o=Ce(t.buffer);if(e.pattern.test(o)||t.placeholder&&e.placeholder===o)return void("replace"!==t.mode&&"select"!==t.mode||(t.buffer=t.buffer.substring(o.length)));t.buffer=t.buffer.substring(o.length)}}function Ne(e,t){const o=e.values.concat([e.placeholder]).map((e=>e.toLowerCase())).sort(((e,t)=>e.length>t.length?-1:1));for(;t.buffer;){const e=t.buffer.toLowerCase(),n=o.find((t=>e.startsWith(t)));if(n){const e=t.buffer.substring(0,n.length);return t.buffer=t.buffer.substring(n.length),e}t.buffer=t.buffer.substring(Ie(t.buffer,0))}return null}function We(e,t){let o=e.replaceAll(t.placeholder,"");const n="left"===t.selectDirection;if(t.selectFill){const e=new RegExp(`${n?"":"^"}${r=t.selectFill,r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}+${n?"$":""}`);o=o.replace(e,"")}var r;return o}function Fe(e,t){let o=[t.endPos,t.endPos,"forward"];if("select"!==t.mode)return o;const n=De(e);o=[n[0],t.endPos,"none"];const[r,s]=qe(e,t.value),a=rt(e,o,[r,s]);if(void 0===a)return o;if(!(a in r)||!(a in s))return o;const l=r[a],i=s[a],p=t.value.slice(l[0],l[1]);if(be(i)&&We(p,i).length===p.length&&a<r.length-1)return qa(),r[a+1];if(xe(i)&&t.insertPos>=l[0]&&t.insertPos<=l[1]){if(t.cycle)return l;const o=function(e,t,o){if(null===e.originalData)return 0;const n=e.insertPos>=t?e.value.substring(t,e.insertPos):"",r=`${n}${e.originalData}`,s=Je(o.values,r);if(s)return Xe(r,s).length-n.length;return 0}(t,l[0],i);if(t.insertPos+o===l[1])return Qe(i.values,p)?[l[1],l[1],"forward"]:(qa(),r[a+1]?r[a+1]:r[a]);const s=[t.insertPos+o,l[1],"none"];return _e(s,n)||(Ca.add(e),setTimeout((()=>Ca.delete(e)),5)),s}return l}function Ye(e,t,o,n){var r,s;const a=null!==(r=Ba.get(e))&&void 0!==r?r:[],l={pos:0,insertPos:null!==(s=t.insertPos)&&void 0!==s?s:t.selectionBefore[0],range:t.selectionBefore,chars:0,placeholder:Va.has(e),buffer:o,data:t.data,originalData:t.data,value:"",mode:Ha.get(e)||"replace",endPos:t.selectionBefore[0],rangeParts:qe(e),unmasked:"",complete:!0,cycle:t.cycle,meta:[]};return Re(a,l,void 0,n),l}function Re(e,t,o,n){var r,s;const a={...t};(null==o?void 0:o.placeholder)&&(t.placeholder=!0);const l=(null==o?void 0:o.repeat)&&"literal"===(null===(r=o.nextPart)||void 0===r?void 0:r.type)?o.nextPart.value:null;let i=0;const p=e.reduce(((e,t)=>e+("char"===t.type?1:0)),0),d=t.chars;for(const o of e){const r=e[i+1];switch(o.type){case"literal":je(o,t,e.at(-1)===o);break;case"char":Ue(o,t,l);break;case"enum":Ke(o,t);break;case"group":const a={repeat:null!==(s=o.repeat)&&void 0!==s&&s,nextPart:r,repeats:0,placeholder:!!o.placeholder};Re(o.parts,t,a,n)}if(n){if(!1===n(t,o))break}const a=ke(r)&&i+2===e.length&&d!==t.chars;if(!(t.buffer||t.data||t.placeholder||a))break;i++}if(t.chars<p&&(t.complete=!1),o){const r=t.chars-d,s=r===p,i=!(!t.data||l&&t.data.startsWith(l)&&t.insertPos<=t.pos),u=!(t.buffer&&l&&t.buffer.startsWith(l)&&t.insertPos>=t.pos+l.length)&&(t.buffer||i);if(o.repeat&&u&&s)return o.repeats++,Re(e,t,o,n);if(!s){t.complete=!1;const o=e.reverse().find((e=>"literal"===e.type));e.reverse(),ke(o)&&t.value.endsWith(o.value)&&(t.value=t.value.substring(0,t.value.length-o.value.length),t.pos=t.value.length)}p>1&&r<p&&0!==r&&t.insertPos<=t.pos?t.data="":o.repeat&&!s&&o.repeats&&Object.assign(t,a)}t.placeholder=a.placeholder}function Ke(e,t){const[o,n]=t.rangeParts,r=o[n.indexOf(e)];if(r&&(t.insertPos<=t.pos||t.insertPos>=r[0]&&t.insertPos<=r[1])&&t.data){const o=t.buffer.substring(0,t.insertPos-t.pos),n=`${o}${t.data}`,r=Je(e.values.concat([e.placeholder]),n);if(r){const s=Xe(n,r);return t.data=t.data.substring(s.length),t.value+=r,r!==e.placeholder?t.unmasked+=r:t.complete=!1,t.meta.push({type:r!==e.placeholder?"enum":"placeholder",value:r}),o?t.buffer=t.buffer.substring(o.length):Ne(e,t),t.endPos=t.pos+s.length,void(t.pos=t.value.length)}t.data=""}if(t.buffer){const o=Ne(e,t);if(o)return t.value+=o,o!==e.placeholder?t.unmasked+=o:t.complete=!1,t.meta.push({type:o!==e.placeholder?"enum":"placeholder",value:o}),void(t.pos=t.value.length)}t.complete=!1,t.value+=e.placeholder,t.meta.push({type:"placeholder",value:e.placeholder}),t.pos=t.value.length}function je(e,t,o){let n=e.value;if(""===t.data&&!t.buffer&&!t.placeholder&&!o)return;let r=!1;for(;n;){const e=t.insertPos<=t.pos?Ce(t.data):"",s=Ce(n);if(e===s)n=Be(t,n),t.meta.push({type:"literal",value:s}),r=!0;else if(!r||t.data||null===t.data||t.placeholder||o)n=He(t,n),t.meta.push({type:"literal",value:s});else if(r&&!t.data)break;t.buffer.startsWith(s)&&(t.buffer=t.buffer.substring(s.length))}null===t.data&&!t.buffer&&t.insertPos<=t.pos&&!t.placeholder&&(t.value=t.value.substring(0,t.value.length-e.value.length),t.pos=t.endPos=t.value.length)}function Ue(e,t,o){var n;let r=!0;if(t.insertPos<=t.pos)for(;null===(n=t.data)||void 0===n?void 0:n.length;){const n=Ce(t.data);if(e.pattern.test(n))return Be(t),t.meta.push({type:"char",value:n}),t.chars++,t.unmasked+=n,void Pe(e,t);if("string"==typeof t.data){if(o&&t.data.startsWith(o)){r=!1;break}t.data=t.data.substring(n.length)}}for(;r&&t.buffer;){const n=Ce(t.buffer);if(e.pattern.test(n))return t.chars++,t.unmasked+=n,Ve(t),void t.meta.push({type:"char",value:n});if(t.placeholder&&n===e.placeholder)return Ve(t),void t.meta.push({type:"placeholder",value:n});if("string"==typeof t.buffer){if(o&&t.buffer.startsWith(o)){t.buffer=t.buffer.substring(o.length);break}t.buffer=t.buffer.substring(n.length)}}t.placeholder?(t.value+=e.placeholder,t.meta.push({type:"placeholder",value:e.placeholder})):t.endPos=t.pos}function ze(e,t,o,n){const r=[n,n,"none"];if("select"===t.mode){const s=qe(e),a=rt(e,r,s),[l,i]=qe(e,t.value),p=void 0!==a&&Ze(o.valueBefore,s[0][a],s[1][a]);if(void 0!==a&&a in l){if(p){const e=l.slice(a).every(((e,o)=>Ze(t.value,e,i[a+o])));return e&&l[a-1]?l[a-1]:l[a]}return[n,l[a][1],"none"]}}return r}function Ze(e,t,o){if(ke(o))return!1;if(be(o)){let n=t[0];for(;n<t[1];){const t=Ce(e.substring(n));if(t!==o.placeholder)return!1;n+=t.length}}return!xe(o)||e.substring(t[0],t[1])===o.placeholder}function Xe(e,t){let o="";do{const n=Ce(e).toLowerCase(),r=Ce(t).toLowerCase();if(n!==r)break;o+=n,e=e.substring(n.length),t=t.substring(r.length)}while(e.length&&t.length);return o}function qe(e,t){const o=Ba.get(e);if(!o)return[[],[]];if(Wa.has(e))return Wa.get(e);const n=null!=t?t:Te(e,e.value),r=[],s=[];let a=null,l=null,i=0,p=!0;for(const e of o)if(ke(e))a=e,null!==l&&(r.push([l,i,"none"]),l=null),i+=e.value.length;else{if(be(a)&&be(e)&&e.token===a.token)i++;else if(be(e))null===l?(l=i,s.push(e)):(r.push([l,i,"none"]),l=i,s.push(e)),i++;else if(xe(e)){l&&r.push([l,i,"none"]),et(e)||(p=!1);const t=Ge(n,e,i);l=null,r.push([i,i+t,"none"]),s.push(e),i+=t}a=e}null!==l&&r.push([l,i,"none"]);const d=[[...r],[...s]];return p&&!t&&Wa.set(e,d),d}function Ge(e,t,o){if(et(t))return t.values[0].length;const n=e.slice(o),r=Je(t.values.concat([t.placeholder]),n);return r?r.length:0}function Je(e,t,o=null,n){var r;if(0===t.length)return o;if(!n){const o=e.find((e=>e.toLowerCase()===t.toLowerCase()));if(o)return o}const s=Ce(t.toLowerCase()),a=`${null!=n?n:""}${s}`,l=e.filter((e=>e.toLowerCase().startsWith(a))),i=l.find((e=>e.toLowerCase()===a));return i&&(o=i),0===l.length?o:1===l.length?l[0]:(l.length>1&&(o=l[0]),null!==(r=Je(l,t.substring(s.length),o,a))&&void 0!==r?r:l[0])}function Qe(e,t){return t=t.toLowerCase(),e.some((e=>(e=e.toLowerCase()).startsWith(t.toLocaleLowerCase())&&e!==t))}function et(e){if(!Fa.has(e)&&Array.isArray(e.values)&&e.values.length>0){const t=e.values[0].length;if(e.placeholder.length!==t)return!1;Fa.set(e,e.values.every((e=>e.length===t)))}return Fa.get(e)}function tt(e,t=1){const[o]=qe(e),n=rt(e,Me(e,De(e)));return void 0!==n&&void 0!==o[n+t]&&(e.setSelectionRange(...Le(e,o[n+t])),!0)}function ot(e,t=1){const[o,n]=qe(e),r=rt(e,De(e));if(void 0!==r&&r in n){const s=n[r];if(xe(s)){const n=o[r],a=e.value.slice(n[0],n[1]);let l=null,i=s.values.indexOf(a);const p=s.values.length-1;if(-1!==i){const e=i+t;i=e<0?p:e>p?0:e,l=s.values[i]}else a===s.placeholder&&(l=t>0?s.values[0]:s.values[p]);if(null!==l){const t={selectionBefore:n,insertPos:n[0],type:"insert",data:l,valueBefore:e.value,cycle:!0};return setTimeout((()=>Ee(e,t)),0),!0}}}return!1}function nt(e,t){if(!e.length)return-1;if(1===e.length)return e[0];const o=e.length/2,n=Number.isInteger(o)?o:Math.floor(o),r=Math.abs(t-e[n-1])<Math.abs(t-e[n])?[0,n]:[n];return nt(e.slice(...r),t)}function rt(e,t,o){const[n]=null!=o?o:qe(e),r=n.findIndex((e=>e[0]!==e[1]&&(!!_e(e,t)||t[1]>e[0]&&t[1]<e[1])));if(-1!==r)return r;const[s,a]=n.reduce(((e,t,o)=>(e[0].add(t[0]),e[0].add(t[1]),e[1][t[0]]=o,e[1][t[1]]=o,e)),[new Set,{}]),l=nt([...s],t[1]);return l in a?a[l]:void 0}function st(e,t=!1){var o,n;const r=null!==(o=Aa.get(e))&&void 0!==o?o:[],s=r[null!==(n=Oa.get(e))&&void 0!==n?n:r.length-1];return s&&(s.complete||t)?Ka.has(e)?[...s.unmasked].reverse().join(""):s.unmasked:t?"":null}function at(e){var t,o,n;const r=null!==(t=Aa.get(e))&&void 0!==t?t:[],s=r[null!==(o=Oa.get(e))&&void 0!==o?o:r.length-1];return null!==(n=null==s?void 0:s.meta)&&void 0!==n?n:null}function lt(e){const t=e=>[...e].reverse().join(""),o=(e,t)=>[t-e[1],t-e[0],e[2]];e.data&&(e.data=t(e.data)),e.valueBefore=t(e.valueBefore),"valueAfter"in e&&(e.valueAfter=t(e.valueAfter)),"selectionAfter"in e&&(e.selectionAfter=o(e.selectionBefore,e.valueAfter.length)),e.selectionBefore=o(e.selectionBefore,e.valueBefore.length)}function it(e){if(e.scrollWidth>e.clientWidth&&null!==e.selectionStart&&null!==e.selectionEnd){const t=e.selectionStart/e.value.length,o=e.selectionEnd/e.value.length;e.scrollLeft=o>.9?e.scrollWidth:t*e.scrollWidth-20,e.dispatchEvent(new CustomEvent("input-scroll",{bubbles:!1,detail:e.scrollLeft}))}}function pt(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(function(e){const t=e.match(ul);if(t){const e=Number(t[2]);if(e<1||e>12)return!1;if(void 0!==typeof t[3]){const e=Number(t[3]);if(e<1||e>31)return!1}if(void 0!==typeof t[4]){const e=Number(t[4]);if(e<0||e>23)return!1}return!0}return!1}(e=e.trim()))return new Date(function(e){const t=e.match(ul);return t&&void 0===t[4]?e+"T00:00:00":e}(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}function dt(e){const t=pt(e);return t.setDate(1),t.setHours(0,0,0),t}function ut(e){const t=pt(e);return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t}function ct(e){return ut(e).getDate()}function ft(e,t=0){const o=pt(e);let n=t-o.getDay();return n>0&&(n-=7),o.setDate(o.getDate()+n),o.setHours(0,0,0),o}function mt(e,t=1){const o=pt(e);return o.setDate(o.getDate()+t),o}function vt(e,t=1,o=!1){const n=pt(e),r=n.getDate();if(o||n.setDate(1),n.setMonth(n.getMonth()+t),!o){const e=ct(n);n.setDate(e<r?e:r)}return n}function ht(e,t=1,o=!1){const n=pt(e),r=n.getDate();if(o||n.setDate(1),n.setFullYear(n.getFullYear()+t),!o){const e=ct(n);n.setDate(e<r?e:r)}return n}function gt(e,t){const o=pt(e),n=pt(t);return o.getDate()===n.getDate()&&o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear()}function $t(e,t,o){if(!ol.has(e)){const t=new Date(tl),o=[3,8,9,7,6,4,3],n=["weekday","month","dayPeriod"],r=["long","short","narrow"],s={};for(let a=0;a<12;a++){t.setMonth(0+a),a in o&&t.setDate(o[a]),t.setUTCHours(8+a);for(const o of r){const r=new Intl.DateTimeFormat(e,n.reduce(((e,t)=>Object.assign(e,{[t]:o})),{hour12:!0,timeZone:"UTC"})).formatToParts(t).map(At);if("long"===o||"short"===o){const n=new Intl.DateTimeFormat(e,{dateStyle:"short"===o?"medium":"long"}).formatToParts(t).map(At).find((e=>"month"===e.type)),s=r.findIndex((e=>"month"===e.type));s>-1&&n&&(r[s]=n)}r.forEach((e=>{if("literal"===e.type)return;const t=e.type;s[t]=Object.assign(s[t]||{},{[e.value]:o})}))}}ol.set(e,s)}const n=ol.get(e);return n?n[t][o]:void 0}function yt(e,t){const o=pl.get(t);if(o&&o[e])return o[e];const n=new Date(tl);n.setUTCHours("am"===e?5:20);const r=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(n).map(At).find((e=>"dayPeriod"===e.type));if(r){const n=o||{};return pl.set(t,Object.assign(n,{[e]:r.value})),r.value}return e}function bt(e,t){const o={timeZone:"UTC"};"string"==typeof e?o.dateStyle=e:("date"in e&&(o.dateStyle=e.date),"time"in e&&(o.timeStyle=e.time));const n=new Intl.DateTimeFormat(t,o),r=n.formatToParts(new Date(tl)).map(At),s=n.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(At).find((e=>"hour"===e.type)),a=s&&"23"===s.value?24:12;return r.map((e=>{const o=e.type,n=function(e,t,o,n){const r=t.length,s=!isNaN(Number(t));let a;switch(e){case"year":return 2===r?il.get("YY"):il.get("YYYY");case"month":return s?1===r?il.get("M"):il.get("MM"):(a=$t(o,e,t),"long"===a?il.get("MMMM"):il.get("MMM"));case"day":return 1===r?il.get("D"):il.get("DD");case"weekday":switch(a=$t(o,e,t),a){case"narrow":return il.get("d");case"short":return il.get("ddd");default:return il.get("dddd")}case"hour":return 12===n?1===r?il.get("h"):il.get("hh"):1===r?il.get("H"):il.get("HH");case"minute":return 1===r?il.get("m"):il.get("mm");case"second":return 1===r?il.get("s"):il.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?il.get("A"):il.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":const l=t.split("-");return 2===l.length&&4===l[1].length?il.get("ZZ"):il.get("Z");default:return}}(e.type,e.value,t,"hour"===e.type?a:void 0);if(void 0===n)return;const r=n[1][o];return r?(n[2]||(n[2]=new RegExp(`${n[0]}`,"g")),{option:{[o]:r},partName:o,partValue:r,token:n[0],pattern:n[2],hour12:12===a}):void 0})).filter((e=>!!e))}function xt(e,t){function o(e,[t,o,n]){const r=Object.keys(o)[0];return{option:o,partName:r,partValue:o[r],token:t,pattern:n,hour12:e}}if(dl.includes(e)||"object"==typeof e)return bt(e,t);let n=e,r=0;const s=e=>{if(e[2]||(e[2]=new RegExp(`(.)?(${e[0]})`,"g")),e[2].test(n)){let t=0;return n=n.replace(e[2],((e,o,n)=>"\\"===o?n:`${"string"==typeof o?o:""}{!${t++?r:r++}!}`)),!!t}return!1},a=function(e){const t=e.map((e=>e.partName)),o=new Set(t);if(t.length>o.size)throw new Error("Cannot reuse format tokens.");return e}(nl.filter(s).concat(rl.filter(s)).map(o.bind(null,!1)).concat(sl.filter(s).map(o.bind(null,!0)))),l=/^\{!(\d+)!\}$/;return n.split(/(\{!\d+!\})/).map((e=>{const t=e.match(l);return t?a[Number(t[1])]:{option:{literal:e},partName:"literal",partValue:e,token:e,pattern:new RegExp(""),hour12:!1}})).filter((e=>!("literal"===e.partName&&""===e.partValue)))}function wt(e,t="en",o=!1,n=(()=>!0)){return xt(e,t).filter(n).reduce(((e,t)=>e+(o&&"literal"===t.partName?function(e){return nl.concat(rl).concat(sl).sort(((e,t)=>e[0].length>t[0].length?1:-1)).reduce(((e,t)=>e.replace(t[0],`\\${t[0]}`)),e)}(t.token):t.token)),"").normalize("NFKC")}function kt(e,t,o,n=!1){function r({partName:e,partValue:t,token:n}){if("literal"===e)return t;const r=s[e];if("hour"===e&&"H"===n)return r.replace(/^0/,"");if(!("minute"!==e&&"second"!==e||"mm"!==n&&"ss"!==n||1!==r.length))return`0${r}`;if("dayPeriod"===e){const e=yt(a.getHours()<12?"am":"pm",o);return"A"===n?e.toUpperCase():e.toLowerCase()}return"timeZoneName"===e?Ot(-1*a.getTimezoneOffset()):r}const s=function(e,t,o,n=!1){function r(e,t=!1){const r=`${o}-u-hc-${t?"h12":"h23"}`;if(i.push(...new Intl.DateTimeFormat(r,e.reduce(((e,t)=>"literal"===t.partName?e:(n&&ll.includes(t.token)&&p.push(t),Object.assign(e,t.option))),{})).formatToParts(s).map(At)),n&&p.length)for(const e of p){let t=[];switch(e.token){case"MMMM":t=new Intl.DateTimeFormat(r,{dateStyle:"long"}).formatToParts(s).map(At);break;case"MMM":t=new Intl.DateTimeFormat(r,{dateStyle:"medium"}).formatToParts(s).map(At)}const o=t.find((t=>t.type===e.partName)),n=i.findIndex((t=>t.type===e.partName));o&&n>-1&&(i[n]=o)}}const s=pt(e),a=t.filter((e=>e.hour12)),l=t.filter((e=>!e.hour12)),i=[],p=[];return a.length&&r(a,!0),l.length&&r(l),i.reduce(((e,t)=>(e[t.type]=t.value,e)),{})}(e,t,o,n),a=pt(e);return t.map((e=>({...e,value:r(e)})))}function _t(e,t="long",o="en",n=!1,r=(()=>!0)){return"ISO8601"===t?pt(e).toISOString():kt(e,xt(t,o).filter(r),o,n).map((e=>e.value)).join("")}function Dt(e){return["numeric","2-digit"].includes(e.partValue)}function Et(e,t){let o=0;const n=e=>[e[o++],e[o]];let r=0;const s=[];let a;do{const[o,l]=n(t);a=l;let i=1;if("literal"===o.partName)i=o.partValue.length;else if(o.token in al)i=al[o.token];else if(l)if("literal"===l.partName){if(i=e.indexOf(l.partValue,r)-r,i<0)throw new Error}else if("dayPeriod"===l.partName){for(let t=1;t<=4;t++)if(isNaN(Number(e.charAt(r+t)))){i=t;break}}else{const t=e.substring(r).search(/\d/);-1!==t&&(i=r+t)}else i=e.length;s.push({...o,value:e.substring(r,r+i)}),r+=i}while(a);return s}function Tt(e,t="en",o=!1){const n=(e,t)=>Array(e).fill("").map(((e,o)=>`${t(o)}`));if("M"===e)return n(12,(e=>e+1));if("MM"===e)return n(12,(e=>{const t=e+1;return t<10?`0${t}`:t}));if(e.startsWith("M"))return Tt("MM").map((n=>_t(`2000-${n}-05`,e,t,o)));if(e.startsWith("d"))return n(7,(e=>`0${e+2}`)).map((o=>_t(`2022-10-${o}`,e,t)));if("a"===e)return[yt("am",t).toLowerCase(),yt("pm",t).toLowerCase()];if("A"===e)return[yt("am",t).toUpperCase(),yt("pm",t).toUpperCase()];if(e.startsWith("Y")){const o=(new Date).getFullYear();return n(120,(e=>e+1)).reduce(((n,r)=>("120"!==r&&n.push(_t(`${o+Number(r)}-06-06`,e,t)),n.unshift(_t(o-Number(r)+"-06-06",e,t)),n)),[_t(`${o}-06-06`,e,t)])}return e.startsWith("D")?n(31,(t=>`${"DD"===e&&t<9?"0":""}${t+1}`)):e.startsWith("H")?n(24,(t=>`${"HH"===e&&t<10?"0":""}${t}`)):e.startsWith("h")?n(12,(t=>`${"hh"===e&&t<9?"0":""}${t+1}`)):e.startsWith("m")||e.startsWith("s")?n(60,(t=>`${e.length>1&&t<10?"0":""}${t}`)):[]}function Lt(e,t="ISO8601",o="en"){let n,r=()=>!0,s="backward";if("object"==typeof e?({date:n,format:t="ISO8601",locale:o="en",dateOverflow:s="backward",partFilter:r=(()=>!0)}=e):n=e,!n)throw new Error("parse() requires a date string.");const a=()=>{throw new Error(`Date (${n}) does not match format (${wt(t,o)})`)};if("ISO8601"===t)return pt(n);const l=dl.includes(t)||"object"==typeof t,i=function(e){let t;for(const o of e){if("literal"===o.partName&&!isNaN(parseFloat(o.partValue)))throw new Error(`Numbers in format (${o.partValue}).`);if(t&&"literal"!==t.partName&&"literal"!==o.partName&&!(t.token in al||o.token in al||Dt(t)&&"a"===o.token.toLowerCase()))throw new Error(`Illegal adjacent tokens (${t.token}, ${o.token})`);t=o}return e}(xt(t,o).filter(r));if(!i.length)throw new Error("parse() requires a pattern.");let p;try{p=Et(n,i)}catch{return a()}const d=new Date,u=new Map([["YYYY",d.getFullYear()],["MM",d.getMonth()+1],["DD",d.getDate()],["HH",0],["mm",0],["ss",0]]);let c=null,f="";p.forEach((e=>{if("literal"===e.partName)return;if(e.token===e.value)return a();const t=Number(e.value);if(u.has(e.token))u.set(e.token,t);else if("YY"===e.token)u.set("YYYY",function(e){const t=(new Date).getFullYear(),o=t%100,n=Math.floor(t/100),r=Number(e);return 100*(n+(r>o+20?-1:0))+r}(e.value));else{const n=e.token;if(n.startsWith("d"))return;if("D"===n)u.set("DD",t);else if("H"===n||n.startsWith("h"))u.set("HH",t);else if("M"===n)u.set("MM",t);else if("a"===n||"A"===n)c=e.value.toLowerCase()===yt("am",o).toLowerCase();else if("Z"===n)f=Mt(e.value);else{const t=Tt(n,o,l).indexOf(e.value);if(-1!==t)switch(n){case"MMM":case"MMMM":u.set("MM",t+1)}}}}));let m=u.get("HH")||0;!1===c?(m+=12===m?0:12,u.set("HH",24===m?0:m)):!0===c&&12===m&&u.set("HH",0),u.set("MM",(u.get("MM")||1)-1);let[v,h,g,$,y,b]=Array.from(u.values());const x=ct(new Date(`${fl(v)}-${cl(h+1)}-10`));if(x<g&&"throw"===s)throw new Error(`Invalid date ${fl(v)}-${cl(h+1)}-${cl(g)}`);g="backward"===s?Math.min(g,x):g;const w=`${fl(v)}-${cl(h+1)}-${cl(g)}T${cl($)}:${cl(y)}:${cl(b)}${f}`,k=new Date(w);return isFinite(+k)?k:a()}function Mt(e){if(!/^([+-])[0-3][0-9][0-6][0-9]$/.test(e))throw new Error(`Invalid offset: ${e}`);return e}function St(e,t="UTC",o="browser"){o="browser"===o?Intl.DateTimeFormat().resolvedOptions().timeZone:o;const n=pt(e),r=e=>{const t=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:e,hourCycle:"h23"}).formatToParts(n).map(At),o={};return t.forEach((e=>{o[e.type]=e.value})),new Date(`${o.year}-${o.month}-${o.day}T${o.hour}:${o.minute}:${o.second}Z`)},s=r(t);return Ot((r(o).getTime()-s.getTime())/1e3/60)}function At(e){return"literal"===e.type&&(e.value=e.value.normalize("NFKC")),e}function Ot(e){return`${e<0?"-":"+"}${String(Math.floor(Math.abs(e/60))).padStart(2,"0")}${String(Math.abs(e%60)).padStart(2,"0")}`}function Ct(e,t="+0000"){const o=pt(e),n=function(e){Mt(e);const[t,o,n,r]=e.match(/([+-])([0-3][0-9])([0-6][0-9])/),s=60*Number(n)+Number(r);return"+"===o?s:-s}(t);return new Date(o.getTime()+1e3*n*60)}function It(e,t="+0000"){const o="+"===t.slice(0,1);return Ct(e,t.replace(o?"+":"-",o?"-":"+"))}function Bt(e,t,o=7){let n,r;const s=pt(e);switch(o){case"month":r=s.getDate(),n=ct(s)-s.getDate();break;case"week":r=s.getDay()+1,n=6-s.getDay();break;case"year":const e=function(e){const t=pt(e);return(new Date(t.getFullYear()+1,0,0).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5}(s),t=function(e){const t=pt(e);return Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5)}(s);r=t,n=e-t;break;default:n=r=o}for(let e=0;e<=n||e<r;e++){if(e<=n){const o=mt(s,e);if(t(o))return o}if(e&&e<=r){const o=mt(s,-e);if(t(o))return o}}return null}function Vt(e){return"timeZoneName"!==e.partName}function Ht(e,t){const o=[],n=pt(t);n.setDate(1);let r=ft(n,e.props.weekStart);r.setHours(n.getHours(),n.getMinutes(),n.getSeconds());const s=function(e,t=0){const o=ft(e,t);return o.setDate(o.getDate()+6),o.setHours(23,59,59),o}(ut(t),e.props.weekStart);let a=[];do{a.push(r),7===a.length&&(o.push(a),a=[]),r=mt(r)}while(r.getTime()<=s.getTime());return{monthDay:n,weeks:o}}function Pt(e){e.props.calendar=r(e.props.showMonths,(e=>e)).map((t=>Ht(e,vt(e.props.renderedDate,t)))),e.props.years=function(e){const t=Number(_t(e.props.renderedDate,"YYYY")),o=t-t%10;return e.props.decade=`${o} - ${o+9}`,r(10,(n=>ht(e.props.renderedDate,o+n-t)))}(e),e.props.months=function(e){const t=pt(e.props.renderedDate);return t.setMonth(0),r(12,(e=>vt(t,e)))}(e)}function Nt(e,t){t.target&&t.target instanceof Element&&(t.target.closest(`#${e.props.id}_panels`)||!document.contains(t.target))||gl.has(e)||(xl.add(e),e.props.expanded=!1)}function Wt(e,t){if(!t)return e.props.inputText="",new Date;const o=t instanceof Date?t:Lt(t,e.props.valueFormat,e.props.valueLocale);return e.props.inputText=e.props.formatDate(o,e.props.format,e.props.locale,!1,Vt),o}function Ft(e){return Array.isArray(e.props.sequence)?yo(e.props.sequence):["day"]}function Yt(e,t,o=!0){var n,r;if(e._value===t)return;if(null==t)return e.input(t,o);e.props.offset=e.props.timezone?St(t,e.props.timezone):"+0000";const s=Ct(t,null!==(n=(r=e.props).offset)&&void 0!==n?n:r.offset="+0000");e.input(_t(s,e.props.valueFormat,e.props.valueLocale,!1),o)}function Rt(e,t){const o=["prev_button","month_button","day_button","year_button","next_button"].find((t=>document.getElementById(`${e.props.id}_${t}`))),n=document.getElementById(`${e.props.id}_${o}`);n instanceof HTMLElement&&(t.preventDefault(),n.focus())}function Kt(e,t){let o="";if(!(t instanceof HTMLInputElement)||e.props.pickerOnly)return;$l.set(e,t),document.addEventListener("click",(t=>{e.props.expanded&&t.target instanceof HTMLElement&&t.target.closest(`#${e.props.id}_panels`)?wl.add(e):wl.delete(e)})),e.on("prop:inputText",(({payload:e})=>{e!==t.value&&("beforeCallback"===Ra.get(t)&&(o=t.value),me(t),t.selectionStart=0,t.selectionEnd=t.value.length,function(e,t){var o,n;if(!Aa.has(e))return;const r=null!==(o=ja.get(e))&&void 0!==o?o:"",s=null!==(n=Ua.get(e))&&void 0!==n?n:"";Ee(e,{type:"insert",selectionBefore:De(e),data:t,valueBefore:e.value,suffix:s,prefix:r})}(t,e),t.value=e,setTimeout((()=>ve(t)),10))}));const[n,r]=Ut(e);fe(t,{pattern:n,partOverrides:r,onChange:({valueAfter:n})=>{if(jt(e),vl.has(e))return vl.delete(e);o&&o===n?o="":(me(t),e.props.inputText=n,setTimeout((()=>ve(t)),10))}})}function jt(e){var t,o;if(e.props.overlay){const n=$l.get(e);!n||!(null===(t=e.props.attrs)||void 0===t?void 0:t.placeholder)||e._value||st(n,!0)||e.props._isFocused||e.props.activeDate&&e.props.expanded?n&&(e.props._isPlaceholder=!1,e.props._overlayParts=i(at(n))):(e.props._isPlaceholder=!0,e.props._overlayParts=[{type:"placeholder",value:null===(o=e.props.attrs)||void 0===o?void 0:o.placeholder}])}}function Ut(e){const t=e.props.locale,o=["full","long","medium","short"].includes(e.props.format)||"object"==typeof e.props.format,n=xt(e.props.format,t);return[wt(e.props.format,t,!0,Vt),n.reduce(((n,s)=>{if("literal"===s.partName)return n;let a=Tt(s.token,t,o);if("YYYY"===s.token&&e.props.minDate&&e.props.maxDate){const t=e.props.minDate.getFullYear();a=r(e.props.maxDate.getFullYear()-t+1,(e=>String(t+e)))}const l={type:"enum",token:s.token,values:a,placeholder:"A"===s.token?"A/P":s.token,selectDirection:"left"};return n[s.token]=l,s.token.startsWith("D")&&yl.set(e,a),n}),{})]}function zt(e,t){return!t||(!!(e.props.minDate&&t<e.props.minDate)||(!!(e.props.maxDate&&t>e.props.maxDate)||void 0))}function Zt(e){return"function"==typeof e.props.validationLabel?e.props.validationLabel(e):e.props.validationLabel||e.props.label||e.props.name||String(e.name)}function Xt(e,t){if(t instanceof HTMLInputElement&&!_l.get(e)&&kl){const o=document.getElementById(`${e.props.id}_overlay`),n=document.getElementById(`${e.props.id}_overlay_inner`);if(o&&t&&n){_l.set(e,o);const r=getComputedStyle(t).color;t.style.color="transparent",t.style.caretColor=r;const s=new ResizeObserver((()=>{var o;const n=getComputedStyle(t),r=t.getBoundingClientRect(),s=null===(o=t.parentElement)||void 0===o?void 0:o.getBoundingClientRect();e.props._overlayStyles={...e.props._overlayStyles,width:n.width,height:n.height,boxSizing:n.boxSizing,padding:n.padding,margin:n.margin,fontSize:n.fontSize,lineHeight:n.lineHeight,top:r.top-((null==s?void 0:s.top)||r.top)+"px",left:r.left-((null==s?void 0:s.left)||r.left)+"px"}}));s.observe(t);const a=e=>{n.scrollLeft=e.detail};t.addEventListener("input-scroll",a),e.on("destroyed",(()=>{t.removeEventListener("input-scroll",a),s.disconnect()}))}}}function qt(e){e.addProps(["_overlayStyles","_overlayParts","_overlayInnerStyles","_isPlaceholder"]),e.props._overlayStyles={position:"absolute",top:"0",left:"0",pointerEvents:e.props._isPlaceholder?"auto":"none"},e.props._overlayInnerStyles={overflow:"hidden",whiteSpace:"nowrap",paddingRight:"20px"},e.on("created",(()=>{e.props.overlay=go(e.props.overlay),e.props.pickerOnly=go(e.props.pickerOnly),e.props.overlay=e.props.pickerOnly?void 0:e.props.overlay,e.props.overlay&&a(`${e.props.id}`,Xt.bind(null,e))})),e.on("prop:_isPlaceholder",(()=>{e.props._overlayStyles={...e.props._overlayStyles,pointerEvents:e.props._isPlaceholder?"auto":"none"}}))}function Gt(e){const t=Array.isArray(e.props.options)?e.props.options:[],o=(Array.isArray(e.props.memoOptions)?e.props.memoOptions:[]).concat(t);return!!o.length&&(!!Array.isArray(e.value)&&e.value.reduce(((t,n)=>{const r=o.find((e=>$o(n,v(e))));return r?t.push(r):e.props.arbitraryValues&&t.push({value:n,label:n}),t}),[]))}function Jt(e,t){if(!(t instanceof HTMLInputElement))throw new Error(`Masks can only be applied to an HTMLInputElement (id: ${t.id}).`);fi.set(e,t),fe(t,{...ci.get(e),onChange:({valueAfter:t,meta:o})=>{e.props._maskValue=t,e.input({maskValue:t}),e.props._overlayParts=i(o)}})}function Qt(e){const t=lp.get(e.parentElement);t&&t.childIsDraggable&&!t.childIsDraggable(e)||(e.setAttribute("draggable","true"),e.addEventListener("dragstart",ro),t&&(!1===t.accepts||"append"==t.dropBehavior||Array.isArray(t.accepts)&&!t.accepts.length)||e.addEventListener("dragenter",uo))}function eo(e,t){if(t&&t.accepts&&Array.isArray(t.accepts)){const o=[];for(const e of t.accepts)o.push(e);ip.set(e,o)}}function to(e){const t=[],o=lp.get(e),n=sp.get(e);for(let n=0;n<e.children.length;n++){const r=e.children[n];r instanceof HTMLElement&&(o&&o.childIsDraggable&&!o.childIsDraggable(r)||t.push(r))}for(let e=0;e<t.length;e++){const o=t[e];Qt(o),rp.set(o,{value:n()[e],index:e})}}function oo(e,t,o,n){if(pp.has(e))lp.set(e,o),eo(e,o),sp.set(e,t),ap.set(e,n),to(e);else{new MutationObserver(no).observe(e,{childList:!0}),lp.set(e,o),eo(e,o),pp.add(e),sp.set(e,t),ap.set(e,n),function(e){const t=lp.get(e.parentElement);t&&(!1===t.accepts||Array.isArray(t.accepts)&&!t.accepts.length)||(e.addEventListener("drop",co),e.addEventListener("dragenter",po))}(e),to(e)}}function no(e){const t=[];for(const o of e){to(o.target);for(const e of o.addedNodes)e instanceof HTMLElement&&rp.has(e)&&t.push(e);for(const e of o.removedNodes)e instanceof HTMLElement&&rp.has(e)}if(t.length&&fp)for(const e of t)for(const t of mp)rp.get(e).value!==rp.get(t).value||e.classList.add("dnd-placeholder");setTimeout((()=>{vp=!1}),200)}function ro(e){if(so(e)&&lo(e.currentTarget.parentNode)){const t=lp.get(e.currentTarget.parentNode);if(t&&t.isDisabled&&t.isDisabled())return void e.preventDefault();if(fp=e.currentTarget,!fp.parentNode)return;const o=ap.get(e.currentTarget.parentNode)();o.includes(fp)||o.push(fp);const n=new DocumentFragment,r=document.createElement("div");r.id="dnd-selections",r.style.display="flex",r.style.flexDirection="column",o.map((e=>{mp.push(e);let t=null;if(fp===e){t=fp.cloneNode(!0);const e=fp.children;for(let t=0;t<e.length;t++){const o=e[t];o instanceof HTMLElement&&(o.style.display="none")}r.appendChild(t)}else t=e.cloneNode(!0),r.appendChild(t),e.style.display="none"})),n.appendChild(r),fp.appendChild(n),fp.classList.add("dnd-dragging"),fp.parentNode.dispatchEvent(new CustomEvent("dndDragStart",{detail:rp.get(fp)}));const s=sp.get(fp.parentNode)();dp.set(fp,s),up.set(fp,fp.parentNode)}}function so(e){return!!e.currentTarget}function ao(e){return!!e&&e instanceof HTMLElement}function lo(e){return!!e&&e instanceof HTMLElement}function io(e){return Array.isArray(e)&&e.length>0}function po(e){if(so(e)&&ao(fp)&&lo(fp.parentNode)&&io(mp)&&!vp){const t=function(e,t){const o=ip.get(e),n=up.get(t),r=t.parentNode;return n!==e&&r===e?{accepted:!0,draggedElementReturned:!0}:o.includes(t.parentNode)?n===e?{accepted:!1,draggedElementReturned:!1}:n!==e?{accepted:!0,draggedElementReturned:!1}:{accepted:!1,draggedElementReturned:!1}:{accepted:!1,draggedElementReturned:!1}}(e.currentTarget,fp);if(t.accepted&&!t.draggedElementReturned){vp=!0;const t=[...sp.get(e.currentTarget)()],o=[];for(const e of mp)o.push(rp.get(e).value);const n=t.concat(o);up.set(fp,e.currentTarget),fp.style.display="none",e.currentTarget.dispatchEvent(new CustomEvent("dndNewValue",{detail:n}))}else if(t.accepted&&t.draggedElementReturned){vp=!0;const t=dp.get(fp);up.set(fp,e.currentTarget),fp.style.display="",fp.parentNode.dispatchEvent(new CustomEvent("dndNewValue",{detail:t}))}}}function uo(e){if(so(e)&&lo(e.currentTarget.parentNode)&&ao(fp)&&lo(fp.parentNode)&&io(mp)&&function(e,t){const o=ip.get(e);return o?o&&o.length?o.includes(t.parentNode):void 0:{accepted:!0,draggedElementReturned:!1}}(e.currentTarget.parentNode,fp)&&function(e,t){return rp.get(t).value!==rp.get(e).value}(e.currentTarget,fp)&&!vp){vp=!0;const t=[...sp.get(e.currentTarget.parentNode)()],o=mp.map((e=>rp.get(e).value)),n=[...t.filter((e=>!o.includes(e)))],r=rp.get(e.currentTarget).index;n.splice(r,0,...o),"none"!==fp.style.display&&fp.parentNode!==e.currentTarget.parentNode?fp.style.display="none":"none"===fp.style.display&&fp.parentNode===e.currentTarget.parentNode&&(fp.style.display=""),up.set(fp,e.currentTarget.parentNode),e.currentTarget.parentNode.dispatchEvent(new CustomEvent("dndNewValue",{detail:n}))}}function co(e){if(e.stopPropagation(),e.preventDefault(),hp=!0,!e.currentTarget)return;const t=sp.get(e.currentTarget)();e.currentTarget.dispatchEvent(new CustomEvent("dndDrop",{detail:t})),setTimeout((()=>{fo()}),50)}function fo(){fp&&(dp.delete(fp),up.delete(fp));for(const e of mp)e.style.display="";document.querySelectorAll(".dnd-placeholder").forEach((e=>{e.classList.remove("dnd-placeholder")})),document.querySelectorAll(".dnd-dragging").forEach((e=>{e.classList.remove("dnd-dragging");for(let t=0;t<e.children.length;t++){const o=e.children[t];o instanceof HTMLElement&&("dnd-selections"===o.getAttribute("id")?o.remove():"none"===o.style.display&&(o.style.display=""))}})),fp=null,mp=[]}function mo(e,t={}){const o=e;try{if(!o)throw new Error("FormKitNoKey");function n(t){if(Mp.has(t)){const o=e=>{t.props.definition&&(t.props.definition.schema=e||[{$el:Uo(Lp),children:`${Uo(Ep)}${Uo(Tp)}`}]),t.emit("schema"),setTimeout((()=>t.destroy()),1e3)};!function(e,t){Go[e]?Go[e].add(t):Go[e]=new Set([t])}(e,o)}}return function(e){const t=()=>{throw new Error(`InvalidFormKitKey ${e}`)};if(!/^fk-/i.test(e))return t();const o=e.substring(3);if(!Wo.test(o))return t();const n=parseInt(o,16).toString(),r=Number(n[0])<6?Number(n[0]):6,s=n.substring(r,r+(n.length-6)),a=n.substring(0,r)+n.substring(r+s.length),l=a.slice(0,2),i=`${a[a.length-1]}${a[0]}`;Number(s)!==Math.floor(Number(a)*Number(l)/Number(i))&&t()}(o),n.library=o=>{if(o.props.type in t){const{schema:n,...r}=t[o.props.type];Mp.add(o),o.define({...r,schema:n(e)})}_p((()=>qo.has(e)&&o.emit(Dp.toString(32))),4e3)},n}catch(r){throw r instanceof Error&&function(e){if("FormKitNoKey"===e.message)throw new Error("A FormKit API key is required, please visit https://formkit.com/pro")}(r),r}}import{isObject as vo,isRecord as ho,undefine as go,eq as $o,clone as yo,token as bo}from"@formkit/utils";import{isDOM as xo,isComponent as wo,createMessage as ko,error as _o,getNode as Do}from"@formkit/core";import{icon as Eo,isSlotCondition as To,isSchemaObject as Lo,extendSchema as Mo,normalizeOptions as So,options as Ao,defaultIcon as Oo,localize as Co}from"@formkit/inputs";const Io=[988,24029,396,13078,980],Bo=18806588,Vo=502357,Ho=16217489;let Po=189024;const No=()=>[30548127325,27022924,34729821653783].map(Uo).join("y"),Wo=/^[0-9a-f]+$/,Fo="undefined"!=typeof window,Yo=r(32,(e=>e)).map((()=>{Po|=0,Po=Po+1831565813|0;let e=Po^Po>>>15|Po;return e=e+e^e>>>427|e^e,((e^e>>>14)>>>0)/4294967296})),Ro=setTimeout,Ko=e=>{clearTimeout(jo[e]),delete jo[e]},jo={},Uo=e=>e.toString(32),zo=e=>`${Uo(Yo[e]).substring(2)}.${Uo(Io[e%(Io.length-1)])}`,Zo={},Xo={},qo=new Set(["",null,void 0]),Go={},Jo={position:"fixed",overflow:"hidden",height:"100%",width:"100%"},Qo={overflow:"hidden",height:"100%"},en={},tn={};let on=0;const nn=()=>({$el:"div",attrs:{key:"$id","data-type":"$type","data-family":"$family","data-multiple":"$attrs.multiple || $multiple || undefined","data-disabled":"$disabled || undefined","data-complete":"$state.complete || undefined","data-invalid":"$state.valid === false && $state.validationVisible || undefined","data-errors":"$state.errors || undefined","data-submitted":"$state.submitted || undefined","data-loading":"$state.loading || undefined","data-overscroll":'$behavior === "overscroll" && true || undefined',"data-id":"$id","data-is-max":"$max && $value && $value.length >= $max || undefined","data-multi-select":"$transferOnSelect === false || undefined","data-has-overlay":"$overlay || undefined","data-expanded":"$expanded || undefined","data-focused":"$_isFocused || undefined"}}),rn=()=>({$el:"div",attrs:{id:'$id + "_inner"'}}),sn=()=>({if:"$label",$el:"label",attrs:{for:"$id",id:"$id + '_label'"}}),an=()=>({$el:"ul",if:"$fns.length($messages)"}),ln=()=>({$el:"li",for:["message","$messages"],attrs:{key:"$message.key",id:"$id + '-' + $message.key","data-message-type":"$message.type"}}),pn=()=>({$el:"div",if:"$help"}),dn=()=>({$el:null}),un=(e,t)=>()=>Eo(e,t),cn=()=>({$el:"span",if:'$part.type === "placeholder" && $part.value'}),fn=()=>({$el:"span",if:'$part.type === "literal" && $part.value'}),mn=()=>({$el:"span",if:'$part.type === "char" && $part.value'}),vn=()=>({$el:"span",if:'$part.type === "enum" && $part.value'}),hn=()=>({$el:"div",if:"$overlay",attrs:{id:'$id + "_overlay"',class:"$classes.overlay",style:"$_overlayStyles",onClick:"$_isPlaceholder && $handlers.overlayClick"}}),gn=()=>({$el:"div",attrs:{id:'$id + "_overlay_inner"',class:"$classes.overlayInner",style:"$_overlayInnerStyles"}}),$n=()=>({$el:null,for:["part","$_overlayParts"]}),yn=new WeakSet,bn=new WeakMap,xn="undefined"!=typeof window,wn=ko({key:"loading",type:"state",value:!0,visible:!1}),kn=ko({key:"loading",type:"state",value:!1,visible:!1}),_n=Symbol(),Dn=new WeakMap,En="undefined"!=typeof window,Tn=u("dd"),{outer:Ln,wrapper:Mn,inner:Sn,icon:An,label:On,prefix:Cn,suffix:In,help:Bn,messages:Vn,message:Hn}=c(Tn),Pn=Tn("selector",(()=>({$el:"button",bind:"$attrs",attrs:{id:"$id",type:"button",onClick:"$handlers.click",onBlur:"$handlers.blur",onKeydown:"$handlers.keydown",tabindex:"0","aria-has-popup":"listbox","aria-expanded":"$expanded","aria-controls":'$expanded && $id + "_listbox" || undefined',"aria-describedBy":"$describedBy"}}))),Nn=Tn("selection","div"),Wn=Tn("placeholder",(()=>({$el:"div",attrs:{key:"placeholder","data-is-placeholder":"true"}}))),Fn=Tn("optionLoading","span"),Yn=Tn("option",(()=>({$el:"div",attrs:{"data-is-placeholder":"$option.isPlaceholder || undefined"}}))),Rn=I(Tn),Kn={position:"fixed",top:0,bottom:0,right:0,left:0,pointerEvents:"none",zIndex:-1,overflowY:"auto","-webkit-overflow-scrolling":"auto"},jn={schema:Ln(Mn(On("$label"),Sn(An("prefix"),Cn(),Pn(m("$option.isPlaceholder && $state.loading !== true",Wn("$option.label"),Nn(Yn(m("$state.loading",Fn("$ui.isLoading.value"),"$option.label")))),m("$state.loading",An("loader")),An("select")),Rn(),In(),An("suffix"))),Bn("$help"),Vn(Hn("$message.value"))),type:"input",family:"dropdown",props:[],features:[Ao,E(C,(function(e){e.on("click",(()=>{e.props.trackHover=!1,(!e.props.options||e.props.options.length||e.props.emptyMessage||e.props.optionsLoader)&&(e.props.options&&!e.props.options.length&&e.props.emptyMessage&&(e.props.showEmptyMessage=!0),e.props.expanded=!0)}))}),O,L(M,A),(function(e){let t,o="";e.on("unusedKeyDown",(({payload:n})=>{if(!n.isComposing&&1===[...n.key].length){clearTimeout(t),o+=n.key;const r=e.props.options.find((e=>e.label.toLowerCase().startsWith(o.toLowerCase())));r&&(e.props.activeValue=v(r)),t=setTimeout((()=>{o=""}),400)}}))})),function(e){e.addProps(["behavior"]),e.on("created",(()=>{"overscroll"===e.props.behavior&&("function"==typeof e.props.optionsLoader&&_o(300,[e]),e.props.dropdownWrapperStyles=yo(Kn),e.props.listboxStyles={display:"inline-block"},e.props.styleWrapper=B.bind(null,e),e.props.positionListBox=V.bind(null,e))})),e.on("prop:expanded",(({payload:t})=>{"overscroll"===e.props.behavior&&(t?function(){on=document.documentElement.scrollTop;for(const e in Jo)tn[e]=document.documentElement.style[e],document.documentElement.style[e]=Jo[e];for(const e in Qo)en[e]=document.body.style[e],document.body.style[e]=Qo[e];document.body.scrollTop=on}():function(){for(const e in Jo)document.documentElement.style[e]=tn[e];for(const e in Qo)document.body.style[e]=en[e];document.body.scrollTop=0,document.documentElement.scrollTop=on}())}))},Oo("select","select"),Oo("selected","check"),Oo("loader","spinner"),Co("isLoading"),Co("loadMore")]},Un=u("tg"),{outer:zn,wrapper:Zn,label:Xn,prefix:qn,suffix:Gn,help:Jn,messages:Qn,message:er,icon:tr}=c(Un),or=Un("input",(()=>({$el:"input",bind:"$attrs",attrs:{type:"checkbox",id:"$id",value:"$_value",checked:"$checked",onInput:"$handlers.toggles",onBlur:"$handlers.blur",disabled:"$disabled"}}))),nr=Un("label",(()=>({if:"($label && $onValueLabel === undefined && $offValueLabel === undefined) || ($valueLabelDisplay === inner) && $altLabelPosition !== true",$el:"label",attrs:{for:"$id"},children:"$label"}))),rr=Un("altLabel",(()=>({$el:"label",if:"($label && ($onValueLabel || $offValueLabel) && $valueLabelDisplay !== hidden && $valueLabelDisplay !== inner) || $altLabelPosition === true",attrs:{for:"$id","data-label-alt":"true",style:{color:{if:"$checked",then:"$valueLabelColorOn",else:"$valueLabelColorOff"}}},children:"$label"}))),sr=Un("innerLabel",(()=>({$el:"div",if:"$valueLabelDisplay === inner && ($checked && $onValueLabel || $offValueLabel)",attrs:{style:{color:{if:"$checked",then:"$valueLabelColorOn",else:"$valueLabelColorOff"}}},children:{if:"$checked",then:"$onValueLabel",else:"$offValueLabel"}}))),ar=Un("valueLabel",(()=>({$el:"label",if:"$valueLabelDisplay !== hidden && $valueLabelDisplay !== inner && (($checked === true && $onValueLabel) || ($checked === false && $offValueLabel))",attrs:{for:"$id"},children:{if:"$checked && $onValueLabel",then:"$onValueLabel",else:{if:"$offValueLabel",then:"$offValueLabel"}}}))),lr=Un("inner",(()=>({$el:"label",attrs:{for:"$id",id:"$id + '_label'"}}))),ir=Un("track",(()=>({$el:"div",attrs:{style:{backgroundColor:{if:"$checked",then:"$trackColorOn",else:"$trackColorOff"}}}}))),pr=Un("thumb",(()=>({$el:"div",attrs:{style:{color:{if:"$checked",then:"$iconColorOn",else:"$iconColorOff"},backgroundColor:{if:"$checked",then:"$thumbColorOn",else:"$thumbColorOff"}}}}))),dr={schema:zn(Zn(rr(),lr(qn(),or(),ir(sr(),pr(m("$slots.default","$slots.default",tr("thumb")))),Gn()),ar(),nr()),Jn("$help"),Qn(er("$message.value"))),type:"input",props:["checked","thumbColorOff","thumbColorOn","iconColorOff","iconColorOn","valueLabelColorOff","valueLabelColorOn","offValue","offValueLabel","onValue","onValueLabel","thumbIcon","trackColorOff","trackColorOn","valueLabelDisplay","altLabelPosition"],features:[function(e){function t(e,t){t.target instanceof HTMLInputElement&&(e.input(t.target.checked?e.props.onValue:e.props.offValue),e.props.checked=t.target.checked)}e.on("created",(()=>{e.props.disabled=go(e.props.disabled),e.props.altLabelPosition=go(e.props.altLabelPosition),void 0===e.props.offValue&&(e.props.offValue=!1),void 0===e.props.onValue&&(e.props.onValue=!0),e.props.checked=$o(e.value,e.props.onValue),e.context&&(e.context.handlers.toggles=t.bind(null,e))})),e.on("commit",(({payload:t})=>{e.props.checked=$o(t,e.props.onValue)}))}]},ur=u("rp"),{outer:cr,inner:fr,prefix:mr,suffix:vr,help:hr,messages:gr,message:$r,icon:yr}=c(ur),br=ur("insertControl",(()=>({$el:"button",attrs:{disabled:"$value.length >= $max",onClick:"$fns.createInsert($item.__key)",type:"button"}}))),xr=ur("addButton",(()=>({$formkit:"button",bind:"$addAttrs",if:"$addButton",disabled:"$value.length >= $max",onClick:"$fns.createAppend()",type:"button"}))),wr=ur("removeControl",(()=>({$el:"button",attrs:{disabled:"$value.length <= $min",onClick:"$fns.createRemover($item.__key)",type:"button"}}))),kr=ur("items",(()=>({$el:"ul",attrs:{role:"list"}}))),_r=ur("item",(()=>({$el:"li",for:["item","index","$value"],if:"$item.__key",attrs:{role:"listitem",key:"$item.__key","data-index":"$item.__index"}}))),Dr=ur("downControl",(()=>({$el:"button",attrs:{disabled:"$index >= $value.length - 1",onClick:"$fns.createShift($item.__key, 1)",type:"button"}}))),Er=ur("upControl",(()=>({$el:"button",attrs:{disabled:"$index <= 0",onClick:"$fns.createShift($item.__key, -1)",type:"button"}}))),Tr=ur("content","div"),Lr=ur("fieldset",(()=>({$el:"fieldset",attrs:{id:"$id",disabled:"$disabled"}}))),Mr=ur("legend",(()=>({$el:"legend",if:"$label"}))),Sr=ur("group",(()=>({$formkit:"group",id:"$item.__key",index:"$item.__index"}))),Ar=ur("controls",(()=>({$el:"ul",if:"$removeControl || $insertControl || $upControl || $downControl"}))),Or=ur("remove",(()=>({$el:"li",if:"$removeControl"}))),Cr=ur("insert",(()=>({$el:"li",if:"$insertControl"}))),Ir=ur("up",(()=>({$el:"li",if:"$upControl"}))),Br=ur("down",(()=>({$el:"li",if:"$downControl"}))),Vr=ur("controlLabel","span");let Hr=0;const Pr=new Set,Nr={schema:cr(Lr(Mr("$label"),hr("$help"),fr(mr(),m("$slots.default",kr(_r(Tr(Sr("$slots.default")),Ar(Ir(Er(Vr("$ui.moveUp.value"),yr("moveUp"))),Or(wr(Vr("$ui.remove.value"),yr("remove"))),Cr(br(Vr("$ui.add.value"),yr("add"))),Br(Dr(Vr("$ui.moveDown.value"),yr("moveDown"))))))),vr()),xr('$addLabel || ($ui.add.value + " " + ($label || ""))')),gr($r("$message.value"))),type:"list",props:["min","max","total","upControl","downControl","removeControl","insertControl","addLabel","addButton","addAttrs"],features:[function(e){const t=new Set,o={value:0};K(e,"removeControl",!0),K(e,"upControl",!0),K(e,"downControl",!0),K(e,"insertControl",!1),K(e,"addButton",!0),K(e,"addLabel",!1),K(e,"addAttrs",{}),e.plugins.add(H),e.plugins.add(R.bind(null,t)),e.hook.input(((n,r)=>r(F(n,e,t,o)))),e.on("commit",(({payload:t})=>{Pr.has(e)&&e.input(t,!1)})),e.hook.commit(((t,n)=>{if(o.value&&Array.isArray(t)&&t.forEach(((n,r)=>{const a=Object.isFrozen(n)&&e.children.findIndex((e=>e.props.id===n.__key));if(!1!==a&&-1!==a){o.value--;const l=n.__index,i=n.__original;Object.defineProperty(i,"__index",{configurable:!0,value:l});const p=s(t);p.splice(r,1),p.splice(l,0,i);const[d]=e._c.children.splice(a,1);d&&e._c.children.splice(l,0,d),0===o.value&&(Y(e,t),t.forEach((e=>delete e.__index)))}})),Array.isArray(t)){Y(e,t);const o=t[t.length-1];vo(o)&&"__shim"in o&&function(e){const t=e.findIndex((e=>vo(e)&&"__shim"in e));-1!==t&&e.splice(t)}(t)}return n(t)})),e.on("created",N)},Co("remove"),Co("add"),Co("moveUp"),Co("moveDown"),Oo("remove","trash"),Oo("add","add"),Oo("moveUp","arrowUp"),Oo("moveDown","arrowDown")]},Wr="undefined"!=typeof window,Fr=u("rt"),{outer:Yr,wrapper:Rr,inner:Kr,label:jr,prefix:Ur,suffix:zr,help:Zr,messages:Xr,message:qr,icon:Gr}=c(Fr),Jr=Fr("input",(()=>({$el:"input",bind:"$attrs",attrs:{id:"$id",type:"range",max:"$max",name:"$name",min:"0",disabled:"$disabled",step:"$step",onInput:"$handlers.DOMInput",onBlur:"$handlers.blur",value:"$_value",style:{position:"absolute",zIndex:"0",top:0,right:0,bottom:0,opacity:"0"}}}))),Qr=Fr("itemsWrapper",(()=>({$el:"div",attrs:{style:{position:"relative",zIndex:"2"},id:"$id + _items_wrapper",onMousemove:"$hoverHighlight && $handlers.ratingHoverOver",onMouseleave:"$hoverHighlight && $handlers.ratingHoverOut",onTouchstart:"$handlers.ratingHoverOver",onTouchmove:"$handlers.ratingHoverOver",onTouchend:"$handlers.handleClick",onClick:"$handlers.handleClick"}}))),es=Fr("onItems",(()=>({$el:"div",attrs:{id:'$id + "_on_wrapper"',style:{position:"relative",display:"flex",width:'$onWidth + "%"',top:"0",bottom:"0",left:"0",overflow:"hidden",color:"$onColor"}}}))),ts=Fr("offItems",(()=>({$el:"div",attrs:{id:'$id + "_off_wrapper"',style:{position:"absolute",display:"flex",flexDirection:"row-reverse",width:'$offWidth + "%"',top:"0",bottom:"0",right:"0",overflow:"hidden",color:"$offColor"}}}))),os=Fr("onItemWrapper",(()=>({$el:"div",for:["item","index","$max"],attrs:{style:{flex:"$wrapperWidth"}}}))),ns=Fr("offItemWrapper",(()=>({$el:"div",for:["item","index","$max"],attrs:{style:{flex:"$wrapperWidth"}}}))),rs={schema:Yr(Rr(jr("$label"),Kr(Gr("prefix"),Ur(),Qr(es(os(m("$slots.onItem",(()=>()=>"$slots.onItem"),m("$slots.default",(()=>()=>"$slots.default"),Gr("rating"))))),ts(ns(m("$slots.offItem",(()=>()=>"$slots.offItem"),m("$slots.default",(()=>()=>"$slots.default"),Gr("rating")))))),Jr(),zr(),Gr("suffix"))),Zr("$help"),Xr(qr("$message.value"))),type:"input",props:[],features:[function(e){e.addProps(["onWidth","offWidth","wrapperWidth","max","min","icon","step","hoverHighlight","ratingIcon","onColor","offColor"]),e.props.max=e.props.max||5,e.props.min=e.props.min||0,e.props.step=e.props.step||1,!1!==e.props.hoverHighlight&&(e.props.hoverHighlight=!0),e.props.disabled=go(e.props.disabled),e.on("created",(()=>{Wr&&(e.props.initialBodyOverflow=document.documentElement.style.overflow),e.context&&(e.context.handlers.ratingHoverOver=U.bind(null,e),e.context.handlers.ratingHoverOut=z.bind(null,e),e.context.handlers.handleClick=j.bind(null,e),Wr&&a(`${e.props.id}`,(()=>{X(e),function(e){const t=document.getElementById(`${e.props.id}_items_wrapper`);if(!t)return;const o=new ResizeObserver((()=>{X(e)}));o.observe(t)}(e),setTimeout((()=>X(e)),100)})))})),e.on("input",(()=>q(e))),e.hook.input(((t,o)=>{if(null===t||""===t||isNaN(t))return o(t);const n=Number(t),r=Number(e.props.min),s=Number(e.props.max);return n>s?o(s):e.props.min&&n<=r?o(r):o(n)}))},Oo("rating","star")]},ss=new WeakSet,as=new WeakMap,ls=new WeakMap,is=new WeakMap,ps=new WeakMap,ds=new WeakMap,us="undefined"!=typeof window;let cs=!1;const fs=new WeakMap,ms=new WeakMap,vs=new WeakSet,hs="undefined"!=typeof window,gs=u("ac"),{outer:$s,wrapper:ys,inner:bs,icon:xs,label:ws,prefix:ks,suffix:_s,help:Ds,messages:Es,message:Ts}=c(gs),Ls=gs("input",(()=>({$el:"input",bind:"$attrs",attrs:{id:"$id",type:"text",onClick:"$handlers.click",onBlur:"$handlers.blur",onKeydown:"$handlers.keydown",onInput:"$handlers.input",value:"$inputText",placeholder:"$isLoadingOption && $ui.isLoading.value || $placeholder || undefined",tabindex:"0",role:"combobox",autocomplete:"off",autocapitalize:"none",readonly:"$attrs.readonly || $isLoadingOption || $multiple && $max && $value && $value.length >= $max && $hasHighlightedRange !== true || undefined","data-selection-appearance":"$selectionAppearance",disabled:"$disabled || undefined",onTouchmove:"$handlers.touchmove",onTouchstart:"$handlers.touchmove",onTouchend:"$handlers.touchend",onFocus:"$handlers.focus",onFocusout:"$handlers.focusOut","aria-autocomplete":"list","aria-expanded":"$expanded","aria-controls":'$expanded && $id + "_listbox" || undefined',"aria-describedBy":"$describedBy","aria-activedescendant":"$expanded && $activeDescendant || undefined"}}))),Ms=gs("listboxButton",(()=>({$el:"button",attrs:{style:"$visibilityStyles",id:'$id + "_listbox_button"',type:"button",onClick:"$handlers.toggleListbox",tabindex:"-1","aria-haspopup":"true","aria-expanded":"$expanded","aria-controls":'$expanded && $id + "_listbox" || undefined'}}))),Ss=gs("selection",(()=>({for:["option","index","$selections"],$el:"div",attrs:{key:"$option.value","data-value":"$option.value",tabindex:"0",onClick:"$handlers.selectTag($option)",onFocus:"$handlers.selectTag($option)"}}))),As=gs("selections",(()=>({$el:"div",attrs:{"aria-live":"polite",id:'$id + "_selections"',onKeydown:"$handlers.keydown"}}))),Os=gs("removeSelection",(()=>({$el:"button",if:"$_value !== undefined",attrs:{id:'$id + "_remove_selection_" + $index',tabindex:"-1",type:"button",onClick:"$disabled !== true && $handlers.removeSelection($option)","aria-controls":"$id"}}))),Cs=gs("optionLoading","span"),Is=gs("option",(()=>({$el:"div",if:"$_value !== undefined"}))),Bs=I(gs),Vs={schema:$s(ys(ws("$label"),bs(xs("prefix"),ks(),Ls(),m("$multiple !== true && $selectionAppearance === option",As(Ss(Is(m("$state.loading",Cs("$ui.isLoading.value"),"$option.label")),Os(xs("close"))))),m("$state.loading",xs("loader")),Ms(xs("select")),Bs(),_s(),xs("suffix")),m("$multiple && $selectionAppearance === option",As(Ss(Is(m("$state.loading",Cs("$ui.isLoading.value"),"$option.label")),Os(xs("close")))))),Ds("$help"),Es(Ts("$message.value"))),type:"input",family:"dropdown",props:[],features:[Ao,ce,E(O,L(M,A)),de(M),Oo("select","select"),Oo("close","close"),Oo("selected","check"),Oo("loader","spinner"),Co("isLoading"),Co("loadMore")]},Hs=u("dp"),{outer:Ps,wrapper:Ns,inner:Ws,icon:Fs,label:Ys,prefix:Rs,suffix:Ks,help:js,messages:Us,message:zs}=c(Hs),Zs=Hs("input",(()=>({$el:"input",bind:"$attrs",attrs:{id:"$id",onKeydown:"$handlers.inputKeydown",value:"$inputText",onInput:"$handlers.dateInput",onClick:"$pickerOnly && $handlers.open",onBlur:"$handlers._blur",onFocus:"$handlers.focus",readonly:"$pickerOnly || $expanded",disabled:"$disabled"}}))),Xs=Hs("panelWrapper",(()=>({$el:"div",if:"$expanded",attrs:{id:"$id + _panels",role:"dialog","aria-modal":"true","aria-label":"Choose date"}}))),qs=Hs("next",(()=>({$el:"button",if:"$showPagination",attrs:{id:"$id + _next_button",onBlur:"$handlers._blurOut",type:"button",onClick:"$handlers.next"}}))),Gs=Hs("nextLabel","span"),Js=Hs("prev",(()=>({$el:"button",if:"$showPagination",attrs:{id:"$id + _prev_button",onBlur:"$handlers._blurOut",type:"button",onClick:"$handlers.prev"}}))),Qs=Hs("prevLabel","span"),ea=Hs("calendar",(()=>({if:'$panel === "day"',$el:"table",for:["month","$calendar"],attrs:{key:'$fns.format($month.monthDay, "YYYY-MM")'}}))),ta=Hs("calendarWeeks",(()=>({$el:"tbody"}))),oa=Hs("calendarHeader",(()=>({$el:"thead"}))),na=Hs("weekDays",(()=>({$el:"tr"}))),ra=Hs("weekDay",(()=>({$el:"th",for:["day","$month.weeks.0"],attrs:{"aria-label":'$fns.format($day, "dddd")'}}))),sa=Hs("week",(()=>({$el:"tr",for:["week","$month.weeks"]}))),aa=Hs("dayCell",(()=>({$el:"td",for:["day","$week"],attrs:{key:'$: "day" + $fns.format($day, "D")',onClick:"$handlers.setDate($day)",onKeydown:"$handlers.keyDown",onMouseenter:"$handlers.mouseEnter($day)",onMouseleave:"$handlers.mouseLeave",onBlur:"$handlers._blurOut",tabindex:'$fns.sameDay($day) && "0" || "-1"',"data-is-extra":"$fns.notInMonth($month.monthDay, $day)","data-disabled":"$fns.isDisabled($day)","aria-selected":"$fns.isSelected($day)","aria-label":'$fns.format($day, "long")'}}))),la=Hs("day","div"),ia=Hs("openButton",(()=>({$el:"button",attrs:{style:"$visibilityStyles",id:'$id + "_listbox_button"',type:"button",onClick:"$handlers.open",tabIndex:'$pickerOnly && "-1" || "0"',disabled:"$disabled","aria-label":'$value && ($ui.changeDate.value + ", " + $inputText) || $ui.chooseDate.value',"aria-haspopup":"true","aria-expanded":"$expanded","aria-controls":'$expanded && $id + "_listbox" || undefined'}}))),pa=Hs("years",(()=>({if:'$panel === "year"',$el:"ul"}))),da=Hs("year",(()=>({for:["year","$years"],$el:"li",attrs:{key:'$: "year" + $fns.format($year, "YYYY")',onClick:"$handlers.setDate($year)",onKeydown:"$handlers.keyDown",onMouseenter:"$handlers.mouseEnter($year)",onMouseleave:"$handlers.mouseLeave",onBlur:"$handlers._blurOut",tabindex:'$fns.sameYear($year) && "0" || "-1"',"aria-selected":"$fns.isSelected($year)","data-disabled":"$fns.isDisabledYear($year)"}}))),ua=Hs("months",(()=>({if:'$panel === "month"',$el:"ul"}))),ca=Hs("month",(()=>({$el:"li",for:["month","$months"],attrs:{key:'$: "month" + $fns.format($month, "M")',onClick:"$handlers.setDate($month)",onKeydown:"$handlers.keyDown",onMouseenter:"$handlers.mouseEnter($month)",onMouseleave:"$handlers.mouseLeave",onBlur:"$handlers._blurOut",tabindex:'$fns.sameMonth($month) && "0" || "-1"',"aria-selected":"$fns.isSelected($month)","data-disabled":"$fns.isDisabledMonth($month)"}}))),fa=Hs("panelHeader",(()=>({$el:"header",attrs:{"aria-live":"polite"}}))),ma=Hs("yearsHeader",(()=>({$el:"div",if:'$panel === "year"'}))),va=Hs("monthsHeader",(()=>({$el:"div",if:'$panel === "month"'}))),ha=Hs("daysHeader",(()=>({$el:"div",if:'$panel === "day"'}))),ga=Hs("timeHeader",(()=>({$el:"div",if:'$panel === "time"'}))),$a=Hs("yearButton",(()=>({$el:"button",attrs:{id:"$id + _year_button",onClick:"$handlers.jumpTo(year)",onBlur:"$handlers._blurOut"},children:"$fns.format($renderedDate, $yearFormat)"}))),ya=Hs("monthButton",(()=>({$el:"button",attrs:{id:"$id + _month_button",onClick:"$handlers.jumpTo(month)",onBlur:"$handlers._blurOut"},children:"$fns.format($renderedDate, $monthButtonFormat)"}))),ba=Hs("dayButton",(()=>({$el:"button",attrs:{id:"$id + _day_button",onClick:"$handlers.jumpTo(day)",onBlur:"$handlers._blurOut",tabindex:"2"},children:"$fns.format($renderedDate, $dayButtonFormat)"}))),xa=Hs("time",(()=>({$el:"div",if:'$panel === "time"'}))),wa=Hs("timeInput",(()=>({$el:"input",attrs:{type:"time",value:"$localTime",onInput:"$handlers.localTime",onKeydown:"$handlers.keyDown",spellcheck:"false",onBlur:"$handlers._blurOut"}}))),{overlayPlaceholder:ka,overlayLiteral:_a,overlayChar:Da,overlayEnum:Ea,overlay:Ta,overlayParts:La,overlayInner:Ma}=f(Hs),Sa=Hs("panel","div"),Aa=new WeakMap,Oa=new WeakMap,Ca=new WeakSet,Ia=new WeakMap,Ba=new WeakMap,Va=new WeakSet,Ha=new WeakMap,Pa=/[\uD800-\uDBFF]/,Na=new WeakMap,Wa=new WeakMap,Fa=new WeakMap,Ya=new WeakMap,Ra=new WeakMap,Ka=new WeakSet,ja=new WeakMap,Ua=new WeakMap,za=new WeakMap,Za=new WeakMap;let Xa=!1;const qa=()=>{Xa=!0,setTimeout((()=>{Xa=!1}),500)},Ga={"#":{type:"char",pattern:/\d/,token:"#",placeholder:"_",selectDirection:"right"},a:{type:"char",pattern:/[a-zA-Z]/,token:"a",placeholder:"_",selectDirection:"left"},h:{type:"char",pattern:/[0-9a-fA-F]/,token:"h",placeholder:"_",selectDirection:"left"},"*":{type:"char",pattern:/./,token:"*",placeholder:"_",selectDirection:"left"}},Ja=new WeakMap,Qa="undefined"!=typeof window;let el=!1;Qa&&document.addEventListener("selectionchange",(()=>{if(!(document.activeElement instanceof HTMLInputElement))return;const e=document.activeElement;if(Za.has(e))return function(e){const t=Za.get(e);if(t){const[o,n]=t,[r,s]=qe(e),a=s.indexOf(o);if(-1===a)return void Za.delete(e);const l=r[a],i=[l[0]+n[0],l[1],"none"];_e(De(e),i)||Ae(e,i)}}(e);if("select"!==Ha.get(e))return;const t=De(e);if(!_e(t,Ja.get(e))){if(Ja.set(e,t),Ca.has(e))return Ca.delete(e);e.dispatchEvent(new CustomEvent("selection",{detail:De(e)}))}}));const tl="1999-03-04T02:05:01.000Z",ol=new Map,nl=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["Z",{timeZoneName:"short"}]],rl=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],sl=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],al={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2,Z:5},ll=["MMMM","MMM","dddd","ddd"],il=new Map([...nl,...rl,...sl].map((e=>[e[0],e]))),pl=new Map,dl=["full","long","medium","short"],ul=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]{3})?(Z|(?:\+|\-)[0-9]{4})?$/,cl=e=>String(e).padStart(2,"0"),fl=e=>String(e).padStart(2,"0"),ml="undefined"!=typeof window,vl=new WeakSet,hl=new WeakSet,gl=new WeakSet,$l=new WeakMap,yl=new WeakMap,bl=new WeakSet,xl=new WeakSet,wl=new WeakSet,kl="undefined"!=typeof window,_l=new WeakMap,Dl={schema:Ps(Ns(Ys("$label"),Ws(Fs("prefix"),Rs(),Ta(Ma(La(ka("$part.value"),_a("$part.value"),Da("$part.value"),Ea("$part.value")))),Zs(),Xs(fa(Js(Qs("$ui.prev.value"),Fs("prev")),ma("$decade"),va($a()),ha(ya(),$a()),ga(ya(),ba(),$a()),qs(Gs("$ui.next.value"),Fs("next"))),Sa(pa(da("$fns.format($year, $yearFormat)")),ua(ca("$fns.format($month, $monthFormat)")),ea(oa(na(ra("$fns.format($day, $weekdayFormat)"))),ta(sa(aa(la("$fns.format($day, $dateFormat)"))))),xa(wa()))),ia(Fs("calendar")),Ks(),Fs("suffix"))),js("$help"),Us(zs("$message.value"))),type:"input",family:"text",props:["dateFormat","dayButtonFormat","format","monthButtonFormat","monthFormat","overlay","pickerOnly","showMonths","showPagination","weekStart","weekdayFormat","yearFormat","years"],features:[qt,function(e){var t,o,n,s,l,i,p,d,u,c,f,m,v,h,g,$,y,b,x,w,k,_;e.addProps(["_isDisabled","_isFocused","activeDate","calendar","disabled","decade","disabledDays","expanded","inputText","localTime","maxDate","maxScan","minDate","months","offset","paginatedPanels","panel","pickerOnly","renderedDate","sequence","timezone","valueFormat","valueLocale"]),e.hook.prop(((t,o)=>("expanded"===t.prop&&e.props.disabled&&(t.value=!1),"weekStart"===t.prop&&(t.value=Number(t.value||0)),"showMonths"===t.prop&&(t.value=Number(t.value||1)),"maxScan"===t.prop&&(t.value=Number(t.value||7)),"timezone"===t.prop&&("string"==typeof e._value||e._value instanceof Date)&&(e.props.offset=St(e._value,t.value)),o(t)))),e.props._isFocused=!1,e.props._isPlaceholder=!1,null!==(t=(m=e.props).valueFormat)&&void 0!==t||(m.valueFormat="ISO8601"),null!==(o=(v=e.props).weekdayFormat)&&void 0!==o||(v.weekdayFormat="d"),null!==(n=(h=e.props).monthFormat)&&void 0!==n||(h.monthFormat="MMM"),null!==(s=(g=e.props).monthButtonFormat)&&void 0!==s||(g.monthButtonFormat="MMMM"),null!==(l=($=e.props).dayButtonFormat)&&void 0!==l||($.dayButtonFormat="D"),null!==(i=(y=e.props).dateFormat)&&void 0!==i||(y.dateFormat="D"),null!==(p=(b=e.props).yearFormat)&&void 0!==p||(b.yearFormat="YYYY"),null!==(d=(x=e.props).paginatedPanels)&&void 0!==d||(x.paginatedPanels=["day","year"]),null!==(u=(w=e.props).valueLocale)&&void 0!==u||(w.valueLocale=e.props.locale),null!==(c=(k=e.props).format)&&void 0!==c||(k.format="long"),e.props.panels=Ft(e),e.props.pickerOnly=go(e.props.pickerOnly),e.props.disabled=go(e.props.disabled),null!==(f=(_=e.props).maxScan)&&void 0!==f||(_.maxScan=7),e.props._isDisabled="function"==typeof e.props.disabledDays?e.props.disabledDays.bind(null,e):zt.bind(null,e),function(e){const t=e._value;let o=new Date;if(t instanceof Date)o=pt(t);else if("string"==typeof t)try{o=pt(Lt(t,e.props.valueFormat,e.props.valueLocale))}catch{console.warn(`Date (${t}) does not match format (${wt(e.props.valueFormat,e.props.valueLocale)})`),o=void 0}else t||(o=void 0);if(e.props.offset=e.props.timezone?St(o||new Date,e.props.timezone):"+0000",e.props.minDate){const t="string"==typeof e.props.minDate?Lt(e.props.minDate):e.props.minDate;e.props.minDate=It(t,e.props.offset)}if(e.props.maxDate){const t="string"==typeof e.props.maxDate?Lt(e.props.maxDate):e.props.maxDate;e.props.maxDate=It(t,e.props.offset)}o=o&&It(o,e.props.offset),o&&Yt(e,o,!1);let n=o||new Date;n=e.props.minDate>n?e.props.minDate:n,e.props.renderedDate=n,e.props.activeDate=n,e.props.localTime=o&&_t(o,"HH:mm")||"12:00"}(e),e.props.calendar=[],e.props.inputText="",e.props.showMonths=e.props.showMonths||1,"function"==typeof e.props.format?(e.props.formatDate=e.props.format,e.props.format=null):e.props.formatDate=_t,e.on("created",(()=>{if(a(`${e.props.id}`,Kt.bind(null,e)),e.context){let t;e.context.fns.format=(t,o)=>_t(t,o,e.props.locale||"en",!1,Vt),e.context.fns.isDisabled=e.props._isDisabled,e.context.fns.isDisabledMonth=t=>!Bt(t,(t=>!e.props._isDisabled(t)),"month"),e.context.fns.isDisabledYear=t=>!Bt(t,(t=>!e.props._isDisabled(t)),"year"),e.context.fns.isSelected=t=>{var o;const n=null===(o=e.context)||void 0===o?void 0:o.value;if(null==n)return;return gt(t,It(n instanceof Date?n:Lt(n,e.props.valueFormat,e.props.valueLocale),e.props.offset))},e.context.handlers._blur=()=>{var t,o;e.props._isFocused=!1,"function"==typeof(null===(t=e.context)||void 0===t?void 0:t.handlers.blur)&&(null===(o=e.context)||void 0===o||o.handlers.blur())},e.context.handlers._blurOut=()=>{e.props.expanded&&setTimeout((()=>{var t;return(null===(t=document.activeElement)||void 0===t?void 0:t.closest(`#${e.props.id}_panels`))||wl.has(e)?wl.delete(e):void(e.props.expanded=!1)}),150)},e.context.handlers.overlayClick=()=>{const t=$l.get(e);t&&(t.focus(),e.props._isPlaceholder=!1)},e.context.handlers.focus=()=>{e.props._isFocused=!0,e.props.pickerOnly&&!hl.has(e)&&(gl.add(e),e.props.expanded=!0,setTimeout((()=>gl.delete(e)),200))},e.context.handlers.dateInput=t=>{var o;if(bl.has(e))return bl.delete(e);if(t.target instanceof HTMLInputElement&&!e.props.expanded)try{let n=Lt({date:t.target.value,format:e.props.format,locale:e.props.locale,partFilter:Vt});if(function(e){return xt(e.props.format,e.props.locale).some((e=>"weekday"===e.partName))}(e)&&e.props.activeDate instanceof Date&&e.props.activeDate.getTime()===n.getTime()&&!Za.get(t.target)&&_t(n,e.props.format,e.props.locale,!1,Vt)!==t.target.value){const r=Tt("dddd",e.props.locale),s=xt(e.props.format,e.props.locale),a=null===(o=Et(t.target.value,s).find((e=>"dddd"===e.token)))||void 0===o?void 0:o.value,l=_t(n,"dddd",e.props.locale);if(a&&r.includes(a)&&l!==a){let t=r.indexOf(a)-r.indexOf(l);t=t<-1?7+t:t,n=mt(n,t),vl.add(e)}}Yt(e,n)}catch(t){Yt(e,void 0)}},e.context.handlers.open=()=>{e.props.expanded=!0},e.context.handlers.next=()=>{switch(e.props.panel){case"year":return void(e.props.renderedDate=ht(e.props.renderedDate,10));case"day":return void(e.props.renderedDate=vt(e.props.renderedDate,1))}},e.context.handlers.prev=()=>{switch(e.props.panel){case"year":return void(e.props.renderedDate=ht(e.props.renderedDate,-10));case"day":return void(e.props.renderedDate=vt(e.props.renderedDate,-1))}},e.context.handlers.setDate=t=>()=>{var o;"month"!==e.props.panel&&"year"!==e.props.panel||!e.props.activeDate||(t=e.props.activeDate),(null===(o=e.context)||void 0===o?void 0:o.fns.isDisabled(t))||e.emit("dateSelected",t)},e.context.handlers.localTime=t=>{const o=t.target;if(!o.value)return;const[n,r]=o.value.split(":");e.props.localTime=o.value,e.props.activeDate.setHours(n,r),Wt(e,e.props.activeDate)},e.context.handlers.keyDown=t=>{switch(e.props.panel){case"day":return e.emit("calendarKeydown",t);case"year":return e.emit("yearKeydown",t);case"month":return e.emit("monthKeydown",t);case"time":return e.emit("timeKeydown",t);default:return}},e.context.handlers.inputKeydown=t=>{e.emit("keydown",t)},e.context.handlers.mouseEnter=o=>n=>{clearTimeout(t),n.target instanceof HTMLElement&&"-1"===n.target.getAttribute("tabindex")&&"true"!==n.target.getAttribute("data-is-extra")&&("month"===e.props.panel||"year"===e.props.panel?e.props.activeDate=Bt(o,(t=>!e.props._isDisabled(t)),e.props.panel):e.props.activeDate=o)},e.context.handlers.mouseLeave=()=>{clearTimeout(t),t=setTimeout((()=>{}),100)},e.context.handlers.jumpTo=t=>()=>{e.props.panels.unshift(e.props.panel),e.props.panel=t},e.context.fns.sameDay=t=>{var o;return(null===(o=e.context)||void 0===o?void 0:o.activeDate)instanceof Date&&gt(t,e.context.activeDate)},e.context.fns.sameMonth=t=>{var o;return(null===(o=e.context)||void 0===o?void 0:o.activeDate)instanceof Date&&t.getMonth()===e.context.activeDate.getMonth()},e.context.fns.sameYear=t=>{var o,n;return(null===(o=e.context)||void 0===o?void 0:o.activeDate)instanceof Date&&t.getFullYear()===(null===(n=e.context)||void 0===n?void 0:n.activeDate.getFullYear())},e.context.fns.notInMonth=(e,t)=>{const o=function(e){const t=pt(e);return t.setHours(0,0,0),t}(t).getTime();return o<dt(e).getTime()||o>ut(e).getTime()||void 0}}}));const D=Nt.bind(null,e);e.on("prop:panel",(({payload:t})=>{e.props.showPagination=e.props.paginatedPanels.includes(t)})),e.on("dateSelected",(({payload:t})=>{t&&e.props._isDisabled(t)||(Array.isArray(e.props.panels)&&e.props.panels.length?e.props.panel=e.props.panels.shift():e.props.expanded=!1,Yt(e,t))})),e.on("input",(({payload:t})=>{const o=new Date,n=t?Wt(e,It("string"==typeof t?Lt(t,e.props.valueFormat,e.props.valueLocale):t,e.props.offset)):o;e.props.activeDate=!t&&e.props.activeDate?e.props.activeDate:n,e.props.renderedDate=!t&&e.props.renderedDate?e.props.renderedDate:n,e.props.localTime=_t(n,"HH:mm"),function(e){const t=yl.get(e);if(e._value&&t){const o=ct(e.props.activeDate);if(t.length>o)t.splice(o,t.length-o);else if(t.length<o)for(let e=t.length+1;e<=o;e++)t.push(String(e))}}(e)})),e.on("prop:renderedDate",Pt.bind(null,e)),e.on("prop:expanded",(({payload:t})=>{var o;if(t){if(wl.delete(e),e.props.panels=Ft(e),e.props.panel=e.props.panels.shift(),"day"===e.props.panel){const t=e.props.activeDate;e.props.activeDate=Bt(e.props.activeDate,(t=>!e.props._isDisabled(t)),"month")||t}Pt(e),a(`${e.props.id}_panels`,(t=>{const o=t.querySelector('[tabindex="0"]');o&&(o.focus(),function(e,t){const o=new MutationObserver((e=>{for(const t of e)"attributes"===t.type&&t.target instanceof HTMLElement&&"0"===t.target.getAttribute("tabindex")?t.target.focus():t.addedNodes.length&&t.addedNodes.forEach((e=>{var t;if(e instanceof HTMLElement&&"0"===e.getAttribute("tabindex"))e.focus();else if(e instanceof HTMLElement&&e.querySelector('[tabindex="0"]')){const t=e.querySelector('[tabindex="0"]');t instanceof HTMLElement&&t.focus()}else e instanceof HTMLElement&&e.querySelector('input[type="time"]')&&(null===(t=e.querySelector('input[type="time"]'))||void 0===t||t.focus())}))}));o.observe(t,{attributes:!0,attributeFilter:["tabindex"],childList:!0,subtree:!0});const n=e.on("prop:expanded",(({payload:t})=>{t||(e.off(n),o.disconnect())}))}(e,t))})),ml&&setTimeout((()=>{document.addEventListener("click",D)}),10)}else{if("time"===e.props.panel)e.emit("dateSelected",e.props.activeDate);else if(e._value){bl.add(e);const t="string"==typeof e._value?Lt(e._value,e.props.valueFormat,e.props.valueLocale):e._value;Wt(e,It(t,e.props.offset))}else Wt(e,void 0);ml&&(hl.add(e),document.removeEventListener("click",D),xl.has(e)||null===(o=document.getElementById(`${e.props.id}`))||void 0===o||o.focus(),xl.delete(e),setTimeout((()=>hl.delete(e)),50))}})),e.on("prop:activeDate",(({payload:t})=>{if(Array.isArray(e.props.calendar)&&e.props.calendar.length)if("day"===e.props.panel){const o=e.props.calendar,n=dt(e.props.renderedDate),r=ut(vt(e.props.renderedDate,o.length-1));t.getTime()<n.getTime()?e.props.renderedDate=vt(e.props.renderedDate,-1):t.getTime()>r.getTime()&&(e.props.renderedDate=vt(e.props.renderedDate))}else if("year"===e.props.panel){const t=e.props.years,o=t[0].getFullYear(),n=t[t.length-1].getFullYear(),r=e.props.activeDate.getFullYear();r>n?e.props.renderedDate=ht(e.props.renderedDate,10):r<o&&(e.props.renderedDate=ht(e.props.renderedDate,-10))}e.props.expanded&&Wt(e,e.props.activeDate)})),e.on("keydown",(({payload:t})=>{switch(t.key){case"ArrowDown":case"ArrowUp":case" ":e.props.pickerOnly&&(e.props.expanded=!0);break;case"Enter":case"Return":e.props.expanded||(e.props.expanded=!0);break;case"Escape":e.props.expanded=!1}})),e.on("calendarKeydown",(({payload:t})=>{let o=null,n=0;switch(t.key){case"ArrowRight":n=1;break;case"ArrowLeft":n=-1;break;case"ArrowDown":n=7;break;case"ArrowUp":n=-7;break;case"Return":case"Enter":e.emit("dateSelected",e.props.activeDate);break;case"Tab":t.shiftKey||Rt(e,t);break;case"Escape":e.props.expanded=!1}if(n&&(t.preventDefault(),o=mt(e.props.activeDate,n)),o&&!e.props._isDisabled(o))e.props.activeDate=o;else if(o&&e.props._isDisabled(o)){const t=n>0?1:-1;r(Number(e.props.maxScan),(e=>t*e)).some((t=>{const n=mt(o,t);return!e.props._isDisabled(n)&&(e.props.activeDate=n,!0)}))}})),e.on("yearKeydown",(({payload:t})=>{let o;switch(t.key){case"ArrowDown":o=5;break;case"ArrowRight":o=1;break;case"ArrowUp":o=-5;break;case"ArrowLeft":o=-1;break;case"Tab":t.shiftKey||Rt(e,t);break;case"Return":case"Enter":e.emit("dateSelected",e.props.activeDate);break;case"Escape":e.props.expanded=!1}const n=e.props.activeDate.getFullYear()+o-e.props.renderedDate.getFullYear();e.props.activeDate=ht(e.props.renderedDate,n)})),e.on("monthKeydown",(({payload:t})=>{let o=0;switch(t.key){case"ArrowDown":o=3;break;case"ArrowRight":o=1;break;case"ArrowLeft":o=-1;break;case"ArrowUp":o=-3;break;case"Tab":t.shiftKey||Rt(e,t);break;case"Return":case"Enter":e.emit("dateSelected",e.props.activeDate);break;case"Escape":e.props.expanded=!1}o&&t.preventDefault();let n=(e.props.activeDate.getMonth()+o)%12;n=n<0?12+n:n;const r=n-e.props.renderedDate.getMonth();let s=vt(e.props.renderedDate,r);if(e.props._isDisabled(s)){const t=Bt(s,(t=>!e.props._isDisabled(t)),"month");t&&(s=t)}e.props.activeDate=s})),e.on("timeKeydown",(({payload:t})=>{switch(t.key){case"Return":case"Enter":t.preventDefault(),e.emit("dateSelected",e.props.activeDate)}})),e.on("prop:_isFocused",(()=>{$l.get(e)&&jt(e)})),e.on("commit",(()=>{if(e.props.activeDate&&e.props._isDisabled(e.props.activeDate)){const t=ko({blocking:!0,key:"rule_invalidDate",meta:{messageKey:"invalidDate",removeImmediately:!1,localize:!0,i18nArgs:[{node:e,name:Zt(e),args:[]}]},type:"validation",value:"The selected date is invalid."});e.store.set(t)}else e.store.remove("rule_invalidDate")}))},Co("next"),Co("prev"),Co("changeDate"),Co("chooseDate"),Oo("next","right"),Oo("prev","left"),Oo("calendar","date")]},El=u("tl"),{outer:Tl,wrapper:Ll,inner:Ml,icon:Sl,label:Al,prefix:Ol,suffix:Cl,help:Il,messages:Bl,message:Vl}=c(El),Hl=El("input",(()=>({$el:"input",bind:"$attrs",attrs:{id:"$id",type:"text",onClick:"$handlers.click",onBlur:"$handlers.blur",onKeydown:"$handlers.keydown",onInput:"$handlers.input",onFocus:"$handlers.focus",value:"$inputText",tabindex:"0",placeholder:"$isLoadingOption && $ui.isLoading.value || $placeholder || undefined",role:"combobox",autocomplete:"off",autocapitalize:"none",readonly:"$attrs.readonly || $isLoadingOption || undefined || $multiple && $max && $value && $value.length >= $max",disabled:"$disabled || undefined",onTouchmove:"$handlers.touchmove",onTouchstart:"$handlers.touchmove",onTouchend:"$handlers.touchend","aria-autocomplete":"list","aria-expanded":"$expanded","aria-controls":'$expanded && $id + "_listbox" || undefined',"aria-describedBy":"$describedBy","aria-activedescendant":"$expanded && $activeDescendant || undefined"}}))),Pl=El("listboxButton",(()=>({$el:"button",attrs:{style:"$visibilityStyles",id:'$id + "_listbox_button"',type:"button",onClick:"$handlers.toggleListbox",tabindex:"-1",disabled:"$disabled || undefined","aria-haspopup":"true","aria-expanded":"$expanded","aria-controls":'$expanded && $id + "_listbox" || undefined'}}))),Nl=El("tagWrapper",(()=>({$el:"span",for:["option","index","$selections"],attrs:{id:'$id + "_tag-wrapper_" + $index',key:"$option.value","data-value":"$option.value",tabindex:"-1",onClick:"$handlers.selectTag($option)"}}))),Wl=El("tag",(()=>({$el:"div",attrs:{id:'$id + "_tag_" + $index',role:"button"}}))),Fl=El("removeSelection",(()=>({$el:"button",if:"$_value !== undefined",attrs:{id:'$id + "_remove_selection_" + $index',tabindex:"-1",type:"button",onClick:"$disabled !== true && $handlers.removeSelection($option)","aria-controls":"$id"}}))),Yl=El("tagLabel",(()=>({$el:"span"}))),Rl=El("tags",(()=>({$el:"div",attrs:{id:'$id + "_selections"',"aria-live":"polite",onKeydown:"$handlers.keydown"}}))),Kl=El("tagLoading","span"),jl=I(El),Ul={schema:Tl(Ll(Al("$label"),Ml(Sl("prefix"),Ol(),Rl(Nl(Wl(m("$state.loading",Kl("$ui.isLoading.value"),Yl("$option.label")),Fl(Sl("close")))),Hl()),m("$state.loading",Sl("loader")),Pl(Sl("select")),jl(),Cl(),Sl("suffix"))),Il("$help"),Bl(Vl("$message.value"))),type:"input",family:"dropdown",props:[],features:[Ao,ce,E(O,L(Gt,A)),de(Gt),Oo("select","select"),Oo("close","close"),Oo("selected","check"),Oo("loader","spinner"),Co("isLoading"),Co("loadMore")]},zl=u("mk"),{outer:Zl,wrapper:Xl,inner:ql,label:Gl,prefix:Jl,suffix:Ql,help:ei,messages:ti,message:oi,icon:ni}=c(zl),{overlayPlaceholder:ri,overlayLiteral:si,overlayChar:ai,overlayEnum:li,overlay:ii,overlayParts:pi,overlayInner:di}=f(zl),ui=zl("input",(()=>({$el:"input",bind:"$attrs",attrs:{type:"$type",disabled:"$disabled",name:"$node.name",onBlur:"$handlers.blur",value:"$_maskValue",id:"$id","aria-describedby":"$describedBy"}}))),ci=new WeakMap,fi=new WeakMap,mi=new WeakMap,vi={schema:Zl(Xl(Gl("$label"),ql(ni("prefix"),Jl(),ii(di(pi(ri("$part.value"),si("$part.value"),ai("$part.value"),li("$part.value")))),ui(),Ql(),ni("suffix"))),ei("$help"),ti(oi("$message.value"))),type:"input",props:["allowIncomplete","mask","mode","tokens","showMask","unmaskValue","prefix","suffix","reverse","overlay"],family:"text",features:[qt,function(e){e.addProps(["_maskValue","_overlayParts"]),e.on("created",(()=>{var t,o,n,r,s;const l=ge("string"==typeof e._value?e._value:"");fi.set(e,l),mi.set(e,l),e.props.allowIncomplete=go(e.props.allowIncomplete),e.props.overlay=go(e.props.overlay);const p=!(void 0!==e.props.showMask&&!go(e.props.showMask));e.props.unmaskValue=go(e.props.unmaskValue),e.hook.prop(((e,t)=>("unmaskValue"===e.prop&&(e.value=go(e)),t(e))));const d={placeholder:p,pattern:null!==(t=e.props.mask)&&void 0!==t?t:"",mode:null!==(o=e.props.mode)&&void 0!==o?o:"shift",partOverrides:null!==(n=e.props.tokens)&&void 0!==n?n:{},prefix:null!==(r=e.props.prefix)&&void 0!==r?r:void 0,suffix:null!==(s=e.props.suffix)&&void 0!==s?s:void 0,reverse:go(e.props.reverse)};ci.set(e,d),e.hook.input(((t,o)=>o(function(e,t){const o=fi.get(e),n="object"==typeof t&&"maskValue"in t;t="string"==typeof t?t:n?t.maskValue:"";const r=mi.get(e);r.value=Te(r,t);const s=he(r,ci.get(e)),a=st(r,e.props.allowIncomplete);if(t===o.value)return e.props.unmaskValue?null!=a?a:"":null===a?"":"string"==typeof t?t:"";if(""===t&&""!==o.value&&!e.props.allowIncomplete)return t;n||s===e.props._maskValue||(o.value=s,e.props._maskValue=s,e.props._overlayParts=i(at(r)||[]));return null===a?"":e.props.unmaskValue?a:s}(e,t)))),e.props._maskValue=he(l,d),e.input(e.props._maskValue,!1),a(`${e.props.id}`,Jt.bind(null,e))}))}]},hi=u("tf"),{outer:gi,wrapper:$i,inner:yi,icon:bi,prefix:xi,suffix:wi,help:ki,messages:_i,message:Di}=c(hi),Ei=hi("fieldset",(()=>({$el:"fieldset",attrs:{id:'$id + "_fieldset"',role:"presentation","aria-describedby":{if:"$help",then:'$: "help-" + $id',else:void 0}}}))),Ti=hi("legend",(()=>({if:"$label",$el:"legend"}))),Li=hi("source",(()=>({$el:"div",attrs:{id:'$id + "_source"',class:'$classes.transferlist + " " + $classes.source'}}))),Mi=hi("sourceHeader",(()=>({$el:"div",attrs:{id:'$id + "_source_header"',role:"presentation",class:'$classes.transferlistHeader + " " + $classes.sourceHeader'}}))),Si=hi("sourceHeaderLabel",(()=>({if:"$sourceLabel",$el:"label",attrs:{id:'$id + "_source_header_label"',for:'$id + "_source_search_input"',class:'$classes.transferlistHeaderLabel + " " + $classes.sourceHeaderLabel'},children:"$sourceLabel || $label"}))),Ai=hi("sourceHeaderItemCount",(()=>({$el:"span",attrs:{id:'$id + "_source_header_item_count"',role:"presentation","aria-label":'$fns.getOptionCount() + " items"',class:'$classes.transferlistHeaderItemCount + " " + $classes.sourceHeaderItemCount'},children:"$fns.getOptionCount()"}))),Oi=hi("targetHeaderLabel",(()=>({if:"$targetLabel",$el:"label",attrs:{id:'$id + "_target_header_label"',for:'$id + "_target_search_input"',class:'$classes.transferlistHeaderLabel + " " + $classes.targetHeaderLabel'},children:"$targetLabel || $label"}))),Ci=hi("targetHeaderItemCount",(()=>({$el:"span",attrs:{id:'$id + "_target_header_item_count"',role:"presentation","aria-label":'$fns.getOptionCount(true) + " items"',class:'$classes.transferlistHeaderItemCount + " " + $classes.targetHeaderItemCount'},children:"$fns.getOptionCount(true)"}))),Ii=hi("sourceControls",(()=>({$el:"div",if:"$searchable",attrs:{id:'$id + "_source_controls"',class:'$classes.transferlistControls + " " + $classes.sourceControls'}}))),Bi=hi("sourceSearch",(()=>({if:"$searchable",$el:"div",attrs:{id:'$id + "_source_search"',class:'$classes.transferlistSearch + " " + $classes.sourceSearch'}}))),Vi=hi("sourceSearchInput",(()=>({$el:"input",attrs:{id:'$id + "_source_search_input"',type:"text",placeholder:"$placeholder",onInput:"$handlers.onSearch",value:"$inputText",onKeydown:"$handlers.handleSourceSearchKeyDown",disabled:"$disabled","aria-label":"Search",role:"searchbox",class:'$classes.transferlistSearchInput + " " + $classes.sourceSearchInput'}}))),Hi=hi("sourceSearchClear",(()=>({$el:"button",if:"$inputText !== undefined",attrs:{id:'$id + "_source_search_clear"',type:"button",onClick:"$handlers.clearSearch","aria-label":"Clear search",class:'$classes.transferlistSearchClear + " " + $classes.sourceSearchClear'}}))),Pi=hi("sourceListItems",(()=>({$el:"ul",attrs:{id:'$id + "_source_list_items"',"aria-activedescendant":"$activeDescendant",onMouseover:"$handlers.onMouseEnter(true)",onMouseout:"$handlers.onMouseLeave(true)",role:"listbox","aria-multiselectable":"true","aria-roledescription":"List of options to choose from.",class:'$classes.transferlistListItems + " " + $classes.sourceListItems',onKeydown:"$handlers.sourceKeyDown",tabindex:"0",onFocus:"$handlers.sourceFocused"}}))),Ni=hi("sourceListItem",(()=>({for:["option","index","$sourceOptions"],$el:"li",attrs:{id:'$id + "_source_list_item_" + $index',"data-value":"$option.value","aria-selected":"$selections && $selections.length > 0 && $fns.isSelected($option)","data-is-active":"$fns.isActive($option)","data-disabled":"$option.attrs.disabled",role:"option",onClick:"$option.attrs.disabled !== true && $handlers.selectOption($option, true)",key:"$option.value",class:'$classes.transferlistListItem + " " + $classes.sourceListItem'}}))),Wi=hi("sourceOption",(()=>({$el:"div",attrs:{"data-checked":"$selections && $selections.length > 0 && $fns.isSelected($option)",class:'$classes.transferlistOption + " " + $classes.sourceOption'}}))),Fi=hi("sourceLoadMore",(()=>({$el:"li",if:"$targetLoading !== true && $state.loading || $state.hasNextPage",attrs:{id:'$id + "_source_load_more"',key:"loadMore","aria-selected":"false",class:'$classes.transferlistLoadMore + " " + $classes.sourceLoadMore'}}))),Yi=hi("loadMoreInner","span"),Ri=hi("target",(()=>({$el:"div",attrs:{id:'$id + "_target"',class:'$classes.transferlist + " " + $classes.target'}}))),Ki=hi("targetHeader",(()=>({$el:"div",attrs:{id:'$id + "_target_header"',role:"presentation",class:'$classes.transferlistHeader + " " + $classes.targetHeader'}}))),ji=hi("targetListItems",(()=>({$el:"ul",attrs:{id:"$id","aria-activedescendant":"$activeDescendant",onMouseover:"$handlers.onMouseEnter(false)",onMouseout:"$handlers.onMouseLeave(false)",class:'$classes.transferlistListItems + " " + $classes.targetListItems',tabindex:"0",onKeydown:"$handlers.targetKeyDown",onFocus:"$handlers.targetFocused"}}))),Ui=hi("targetListItem",(()=>({for:["option","index","$targetOptions"],$el:"li",attrs:{id:'$id + "_target_list_item_" + $index',"data-disabled":"$option.attrs.disabled","data-value":"$option.value","aria-selected":"$selections && $selections.length && $fns.isSelected($option, $target)","data-is-active":"$fns.isActive($option)",role:"option",onClick:"$option.attrs.disabled !== true && $handlers.selectOption($option, false)",key:"$option.value",class:'$classes.transferlistListItem + " " + $classes.targetListItem'}}))),zi=hi("targetOption",(()=>({$el:"div",attrs:{id:'$id + "_target_list_item_" + $index',class:'$classes.transferlistOption + " " + $classes.targetOption'}}))),Zi=hi("targetLoadMore",(()=>({$el:"li",if:"$targetLoading && $state.loading",attrs:{id:'$id + "_target_load_more"',key:"loadMore","aria-selected":"false",class:'$classes.transferlistLoadMore + " " + $classes.targetLoadMore'}}))),Xi=hi("transferControls",(()=>({$el:"div",attrs:{id:'$id + "_transfer_controls"'}}))),qi=hi("transferButtonForward",(()=>({if:"$transferOnSelect !== true",$el:"button",attrs:{id:'$id + "_transfer_button_forward"',type:"button",disabled:"$selections.length === 0 || $sourceSelected === false || $disabled || ($max && $value && $value.length >= $max)",onClick:"$handlers.transferForward","aria-label":"$ui.addSelectedValues.value",title:"$ui.addSelectedValues.value",class:'$classes.transferlistButton + " " + $classes.transferButtonForward'}}))),Gi=hi("transferButtonForwardAll",(()=>({$el:"button",attrs:{id:'$id + "_transfer_button_forward_all"',type:"button",disabled:"$options.length === $targetOptions.length || $disabled || ($max && $value && $value.length >= $max)",onClick:"$handlers.transferForwardAll","aria-label":"$ui.addAllValues.value",title:"$ui.addAllValues.value",class:'$classes.transferlistButton + " " + $classes.transferButtonForwardAll'}}))),Ji=hi("transferButtonBackward",(()=>({if:"$transferOnSelect !== true",$el:"button",attrs:{id:'$id + "_transfer_button_backward"',onClick:"$handlers.transferBackward",type:"button",disabled:"$selections.length === 0 || $sourceSelected === true || $disabled","aria-label":"$ui.removeSelectedValues.value",title:"$ui.removeSelectedValues.value",class:'$classes.transferlistButton + " " + $classes.transferButtonBackward'}}))),Qi=hi("transferButtonBackwardAll",(()=>({$el:"button",attrs:{id:'$id + "_transfer_button_backward_all"',onClick:"$handlers.transferBackwardAll",type:"button",disabled:"$targetOptions.length === 0 || $disabled","aria-label":"$ui.removeAllValues.value",title:"$ui.removeAllValues.value",class:'$classes.transferlistButton + " " + $classes.transferButtonBackwardAll'}}))),ep=hi("controlLabel","span"),tp=hi("sourceEmptyMessage",(()=>({$el:"li",if:"$showSourceEmptyMessage && $sourceEmptyMessage && $state.loading !== true",attrs:{id:'$id + "_source_empty_message"',key:"$sourceEmptyMessage",role:"presentation"}}))),op=hi("targetEmptyMessage",(()=>({$el:"li",if:"$showTargetEmptyMessage && $targetEmptyMessage",attrs:{id:'$id + "_empty_message"',key:"$emptyMessage",role:"presentation"}}))),np=hi("emptyMessageInner","span"),rp=new WeakMap,sp=new WeakMap,ap=new WeakMap,lp=new WeakMap,ip=new WeakMap,pp=new WeakSet,dp=new WeakMap,up=new WeakMap,cp="undefined"!=typeof window;let fp=null,mp=[],vp=!1,hp=!1;cp&&(document.addEventListener("dragover",(function(e){e.preventDefault()})),document.addEventListener("dragend",(()=>{hp?hp=!1:function(){if(ao(fp)&&lo(fp.parentNode)){const e=dp.get(fp);fp.parentNode.dispatchEvent(new CustomEvent("dndDrop",{detail:e}))}fo()}()})));const gp=new WeakSet,$p=new WeakSet,yp=new WeakMap,bp=new WeakMap,xp="undefined"!=typeof window,wp={schema:gi(Ei(Ti("$label"),ki("$help"),$i(Li(Mi(Si(),Ai()),Ii(Bi(Vi(),Hi(bi("close")))),Pi(tp(np("$sourceEmptyMessage")),Ni(m("$transferOnSelect !== true && $fns.isSelected($option)",bi("selected")),Wi("$option.label")),Fi(Yi(m("$targetLoading !== true && $state.loading",bi("loader")),"$state.loading && $ui.isLoading.value || $ui.loadMore.value")))),Xi(Gi(ep("$ui.addAllValues.value"),bi("fastForward")),qi(ep("$ui.addSelectedValues.value"),bi("moveRight")),Ji(ep("$ui.removeSelectedValues.value"),bi("moveLeft")),Qi(ep("$ui.removeAllValues.value"),bi("rewind"))),Ri(Ki(Oi(),Ci()),ji(op(m("$state.loading !== true",np("$targetEmptyMessage"))),Ui(m("$transferOnSelect !== true && $fns.isSelected($option)",bi("selected")),zi("$option.label")),Zi(Yi(m("$targetLoading && $state.loading",bi("loader")),"$state.loading && $ui.isLoading.value || $ui.loadMore.value"))))),_i(Di("$message.value")))),type:"input",props:["options","selections","activeValue","activeDescendant","sourceSelected","targetOptions","sourceOptions","target","source","optionLoader","filterOptions","inputText","renderList","search","hasNextPage","page","targetOptionValues","targetLoading","searchable","sourceLabel","targetLabel","transferOnSelect","disabled","placeholder","filter","showSourceEmptyMessage","showTargetEmptyMessage","sourceEmptyMessage","targetEmptyMessage","clearOnSelect","max","debounce"],features:[function(e){function t(e,t){t&&(e.props.showTargetEmptyMessage=0===t.length||!1===t,t=t||[],e.props.newTargetValue&&e.props.isSourceOption&&!e.props.dropped&&!e.props.forceUpdate||(e.props.sourceOptions=[...e.props.options.filter((e=>!t.find((t=>v(e)===v(t)))))]),(!e.props.newSourceValue||e.props.isSourceOption||e.props.dropped||e.props.forceUpdate)&&(e.props.targetOptions=t),e.props.targetOptionValues=t.map((e=>v(e))),e.props.showSourceEmptyMessage=e.props.sourceOptions&&0===e.props.sourceOptions.length,e.props.selections=[],e.props.dropped=!1,e.props.forceUpdate=!1)}function o(e){const t=Array.isArray(e.props.options)?e.props.options:[],o=Array.isArray(e.props.memoOptions)?e.props.memoOptions:[],n=Array.isArray(e.props.targetOptions)?e.props.targetOptions:[];0===e.props.targetOptions.length&&(e.props.showTargetEmptyMessage=!0);const r=o.concat(t).concat(n);return!!r.length&&(!!Array.isArray(e.value)&&e.value.reduce(((e,t)=>{const o=r.find((e=>$o(t,v(e))));if(o)e.push(o);else{const o=e=>"string"==typeof e?{label:e,value:t}:l(e)?e:ho(e)?Object.assign({label:String(t),value:t},e):{label:String(t),value:t};e.push(o(t))}return e}),[]))}function n(e,t,o,n){function r(){const o=p.findIndex((e=>v(e)===v(t))),n=p.findIndex((t=>v(t)===v(e.props.selections[0]))),r=Math.min(o,n),s=Math.max(o,n),a=p.slice(r,s+1);e.props.selections=a}if(e.props.disabled)return;if(e.props.isSourceOption!==o&&(e.props.isSourceOption=o,e.props.selections=[]),e.props.isSourceOption&&Array.isArray(e._value)&&e._value.length>=e.props.max)return;const a=!!n&&(n.shiftKey&&e.props.selections.length);e.props.isSourceOption=o;const l=e.props.selections.map((e=>v(e)));if(l.includes(v(t))){const o=e.props.selections.findIndex((e=>v(e)===v(t)));return e.props.selections.splice(o,1),void(e.props.selections=[...e.props.selections])}const p=o?e.props.sourceOptions:e.props.targetOptions;e.props.sourceSelected===!o?a?r():(e.props.selections=[...e.props.selections,t],e.props.sourceSelected=o):a?r():e.props.selections=[...e.props.selections,t],e.props.transferOnSelect&&(o?s(e):i(e))}function r(e,t){const o=t.map((e=>v(e)));if(Array.isArray(e._value)){const t=e._value.filter((e=>!o.includes(e)));e.props.selections=[],e.input(t),e.props.activeValue=void 0}}function s(e){if(Array.isArray(e._value)){e.props.optionsLoader||!1===e.props.clearOnSelect||(e.props.inputText=void 0);const t=e.props.selections.map((e=>v(e))),o=[...e._value,...t];e.props.forceUpdate=!0,e.input(o),e.props.selections=[]}}function i(e){if(Array.isArray(e._value)){const t=e.props.selections.map((e=>v(e))),o=e._value.filter((e=>!t.includes(e)));if(e.props.forceUpdate=!0,e.input(o),e.props.optionsLoader){const t=[...e.props.options];e.props.options=[...t]}e.props.selections=[]}}function p(t){let o=null,n="",r=[];if(e.props.mouseOnSource){if(o=gp.has(e),n=`${e.props.id}_source_list_item`,r=[...e.props.sourceOptions],!r||!r.length||o)return r=[],n="",void(o=null)}else if(e.props.mouseOnTarget&&(o=$p.has(e),n=`${e.props.id}_target_list_item`,r=[...e.props.targetOptions],!r||!r.length||o))return r=[],n="",void(o=null);const s=r.reduce(((e,t,o)=>{var r;if(null===(r=t.attrs)||void 0===r?void 0:r.disabled)return e;const s=document.getElementById(n+`_${o}`);return s&&e.push([s,t]),e}),[]),a=document.getElementById(`${e.props.id}_load_more`);a&&s.push([a,e.props.loadMoreOption]),e.props.mouseOnSource&&gp.add(e),e.props.mouseOnTarget&&$p.add(e),s.length&&d(e,s,null,t)}function d(e,t,o,n){var r,s,a;const l=n,i=l?l.getBoundingClientRect():{top:0,bottom:0};if(o=null,e.props.trackHover){if(e.props.mouseY>i.top&&e.props.mouseY<i.bottom){let n=o||0,r=o;const s=(t,n)=>{var r;const s=n[0],{y:a,height:l,x:i,width:p}=s.getBoundingClientRect();if(e.props.mouseX>i&&e.props.mouseX<i+p&&e.props.mouseY>a&&e.props.mouseY<a+l){o=t;const s=n[1];return e.props.activeValue=s&&!(null===(r=s.attrs)||void 0===r?void 0:r.disabled)?v(s):void 0,!0}return!1};do{if(null!==n&&s(n,t[n]))break;if(null!==r&&s(r,t[r]))break;null!==n&&(n++,n>t.length-1&&(n=null)),null!==r&&(r--,r<0&&(r=null))}while(null!==n||null!==r)}null===o&&(e.props.activeValue=void 0)}else u(e);e.props.mouseOnSource||e.props.mouseOnTarget?(l&&!(null===(r=e.store.loading)||void 0===r?void 0:r.value)&&(null===(s=e.store.hasNextPage)||void 0===s?void 0:s.value)&&l.scrollTop+l.offsetHeight>l.scrollHeight-200&&e.props.mouseOnSource&&(e.props.allowAppendOptions=!0,null===(a=e.context)||void 0===a||a.handlers.loadMore(!1)),e.props.mouseOnSource&&gp.has(e)||e.props.mouseOnTarget&&$p.has(e)?requestAnimationFrame(d.bind(null,e,t,o,n)):p(n)):(gp.delete(e),$p.delete(e))}function u(e){const t=document.getElementById(e.props.activeDescendant);t&&t.scrollIntoView({block:"nearest",inline:"start"})}e.props.memoOptions=[],e.props.targetOptions=[],e.props.targetOptionValues=[],e.props.multiple=!0,e.props.loadingCounter=0,e.props.page=1,e.props.hasNextPage=_.bind(null,e),e.props.applyLoadedOptions=G,e.on("created",(()=>{if(e._value||e.input([],!1),e.props.options||(e.props.options=[]),e.props.disabled=go(e.props.disabled),e.props.searchable=go(e.props.searchable),void 0===e.props.clearOnSelect?e.props.clearOnSelect=!0:"false"===e.props.clearOnSelect&&(e.props.clearOnSelect=!1),void 0===e.props.transferOnSelect?e.props.transferOnSelect=!0:"false"===e.props.transferOnSelect&&(e.props.transferOnSelect=!1),e.props.targetOptions.length&&(e.props.targetOptionValues=e.props.targetOptions.map((e=>v(e)))),e.props.initialOptions=[...e.props.options],e.props.max&&(e.props.max=parseInt(e.props.max)),e.props.selections=[],e.props.sourceSelected=!1,"function"!=typeof e.props.filter&&(e.props.filter=(e,t)=>e.label.toLowerCase().includes(t.toLowerCase())),e.props.optionsLoader&&0===e.props.options.length?h(e):e.props.optionsLoader||0!==e.props.options.length||(e.props.showSourceEmptyMessage=!0),e.context){function t(e){return e._value?e._value:[]}function o(e){return e.props.options.map((e=>v(e))).filter((t=>!e.props.targetOptionValues.includes(t)))}function l(e){return xp&&d(e)}function p(e){return xp&&d(e,!1)}function d(e,t=!0){if(!e.props.selections)return[];const o=e.props.selections.map((e=>e.value)),n=[];for(const e of o){const o=t?".formkit-source-list-items":".formkit-target-list-items",r=document.querySelector(`[data-type="transferlist"] ${o} [data-value="${e}"]`);r&&n.push(r)}return n}function c(t){t.stopImmediatePropagation(),t.detail,e.props.trackHover=!1}function f(e){return"true"!==e.getAttribute("data-disabled")&&!e.classList.contains("formkit-source-empty-message")&&!e.classList.contains("formkit-target-empty-message")&&!e.classList.contains("formkit-transferlist-load-more")&&"none"!==e.style.display}function m(e){return e.props.disabled||e.props.max&&Array.isArray(e._value)&&e._value.length>=e.props.max}function g(e){return e.props.disabled}if(e.context.handlers.loadMore=D.bind(null,e),e.context.fns.isActive=t=>$o(e.props.activeValue,v(t))||void 0,e.context.fns.optionValue=v,e.context.fns.isSelected=t=>e.props.selections.map((e=>v(e))).includes(v(t)),e.context.fns.getOptionCount=(t=!1)=>{const o=t?e.props.targetOptions:e.props.options;let n;return n=t?o.length:o.filter((t=>!e.props.targetOptionValues.includes(v(t)))).length,e.props.selections.length>0&&t!==e.props.isSourceOption?e.props.selections.length+"/"+n:n},e.context.handlers.clearSearch=()=>{e.props.inputText=void 0},e.context.handlers.selectOption=(t,o)=>n.bind(null,e,t,o),e.context.handlers.transferForward=s.bind(null,e),e.context.handlers.transferForwardAll=()=>{if(Array.isArray(e._value)){const t=e.props.options.filter((e=>!e.attrs||!e.attrs.disabled)).map((e=>v(e)));e.props.max&&t.length>e.props.max&&(t.length=e.props.max);const o=[...t];e.props.forceUpdate=!0,e.input(o),e.props.selections=[]}},e.context.handlers.transferBackward=i.bind(null,e),e.context.handlers.transferBackwardAll=()=>{Array.isArray(e._value)&&(e.props.forceUpdate=!0,e.input([]),e.props.selections=[])},e.context.handlers.onSearch=t=>{const o=t.target;e.props.inputText=""===o.value?void 0:o.value,function(e,t,o=!1){if("function"==typeof e.props.optionsLoader){if(o&&(e.props.options=[]),e.props.search=t,clearTimeout(yp.get(e)),e.props.skipNextFilter)return void(e.props.skipNextFilter=!1);yp.set(e,setTimeout((()=>{var t;e.props.page=1,null===(t=e.context)||void 0===t||t.handlers.loadMore(!0)}),e.props.debounce||200))}else if(Array.isArray(e.props.initialOptions)&&"string"==typeof t){const o=[...e.props.initialOptions].filter((t=>Array.isArray(e._value)&&!e._value.includes(v(t))));e.props.options=o.filter((o=>e.props.filter(o,t,e)))}}(e,o.value)},e.context.handlers.handleSourceSearchKeyDown=t=>function(e,t){if("ArrowDown"===t.key||"Tab"===t.key){t.preventDefault();const o=document.getElementById(`${e.props.id}_source_list_items`);o&&o.focus()}}(e,t),e.context.handlers.sourceKeyDown=t=>function(e,t){var o;if(e.props.trackHover=!1,!(t.currentTarget&&t.currentTarget instanceof HTMLElement))return;const s=e.props.options.filter((t=>!e.props.targetOptionValues.includes(v(t))));if(["ArrowDown","ArrowUp"].includes(t.key)){if(t.preventDefault(),!Array.isArray(s)||!s.length)return;const n=s.reduce(((e,t)=>{var o;return(null===(o=null==t?void 0:t.attrs)||void 0===o?void 0:o.disabled)||e.push(v(t)),e}),[]);(null===(o=e.store.hasNextPage)||void 0===o?void 0:o.value)&&n.push(_n);const r=n.indexOf(e.props.activeValue);if(-1===r&&n.length)e.props.activeValue=n[0];else if("ArrowDown"===t.key&&n.length>r+1)e.props.activeValue=n[r+1];else if("Tab"===t.key&&n.length<=r+1){const t=document.getElementById(`${e.props.id}_transfer_button_forward_all`);if(t)t.focus();else if(e.props.targetOptionValues.length&&document.getElementById(`${e.props.id}_target_list_item_0`)){const t=document.getElementById(`${e.props.id}`);t&&(t.focus(),setTimeout((()=>{e.props.activeValue=e.props.targetOptionValues[0]})))}e.props.activeValue=void 0}else if("ArrowUp"===t.key&&r>0)e.props.activeValue=n[r-1];else if("ArrowUp"===t.key&&0===r){const t=document.getElementById(`${e.props.id}_source_search_input`);t&&t.focus(),e.props.activeValue=void 0}u(e)}else if("Enter"===t.key){if(t.preventDefault(),e.props.activeValue){const t=s.find((t=>v(t)===e.props.activeValue));t&&n(e,t,!0)}e.props.transferOnSelect&&(e.props.activeValue=void 0)}else if("Backspace"===t.key)e.props.selections.length&&r(e,e.props.selections);else if("Tab"===t.key&&t.shiftKey){t.preventDefault();const o=document.getElementById(`${e.props.id}_source_search_input`);o&&(o.focus(),e.props.activeValue=void 0)}else if("Tab"===t.key){t.preventDefault();const o=document.getElementById(`${e.props.id}_transfer_button_forward_all`);if(o)o.focus();else if(e.props.targetOptionValues.length&&document.getElementById(`${e.props.id}_target_list_item_0`)){const t=document.getElementById(`${e.props.id}`);t&&(t.focus(),setTimeout((()=>{e.props.activeValue=e.props.targetOptionValues[0]})))}e.props.activeValue=void 0}}(e,t),e.context.handlers.targetKeyDown=t=>function(e,t){var o;if(e.props.trackHover=!1,!(t.currentTarget&&t.currentTarget instanceof HTMLElement))return;const s=e.props.targetOptions;if(["ArrowDown","ArrowUp"].includes(t.key)){if(t.preventDefault(),!Array.isArray(s)||!s.length)return;const n=s.reduce(((e,t)=>{var o;return(null===(o=null==t?void 0:t.attrs)||void 0===o?void 0:o.disabled)||e.push(v(t)),e}),[]);(null===(o=e.store.hasNextPage)||void 0===o?void 0:o.value)&&n.push(_n);const r=n.indexOf(e.props.activeValue);-1===r&&n.length?e.props.activeValue=n[0]:"ArrowDown"===t.key&&n.length>r+1?e.props.activeValue=n[r+1]:"ArrowUp"===t.key&&r>0&&(e.props.activeValue=n[r-1]),u(e)}else if("Enter"===t.key){if(t.preventDefault(),e.props.activeValue){const t=s.find((t=>v(t)===e.props.activeValue));t&&n(e,t,!1)}e.props.transferOnSelect&&(e.props.activeValue=void 0)}else if("Backspace"===t.key)e.props.selections.length&&r(e,e.props.selections);else if("Tab"===t.key&&t.shiftKey){t.preventDefault();const o=document.getElementById(`${e.props.id}_source_list_items`);o&&(e.props.activeValue=void 0,o.focus())}else"Tab"===t.key&&t.preventDefault()}(e,t),e.context.handlers.sourceFocused=()=>{const t=e.props.options.filter((t=>{var o;return!e.props.targetOptionValues.includes(v(t))&&!(null===(o=t.attrs)||void 0===o?void 0:o.disabled)})),o=t[0];o&&(e.props.activeValue=v(o))},e.context.handlers.targetFocused=()=>{const t=e.props.targetOptions[0];t&&(e.props.activeValue=v(t))},e.context.handlers.onMouseEnter=t=>()=>{t?e.props.mouseOnSource=!0:e.props.mouseOnTarget=!0},e.context.handlers.onMouseLeave=t=>()=>{t?e.props.mouseOnSource=!1:e.props.mouseOnTarget=!1},xp){a(e.props.id+"_source_list_items",(n=>{a(`${e.props.id}`,(r=>{n instanceof HTMLElement&&r instanceof HTMLElement&&(n.addEventListener("dndNewValue",(t=>{if(t.stopImmediatePropagation(),!Array.isArray(e._value))return;e.props.newTargetValue=!1,e.props.newSourceValue=!0;const o=e._value.filter((e=>!t.detail.includes(e)));e.input([...o])})),r.addEventListener("dndNewValue",(t=>{t.stopImmediatePropagation(),e.props.newSourceValue=!1,e.props.newTargetValue=!0,e.input([...t.detail])})),n.addEventListener("dndDrop",(t=>{if(e.props.dropped=!0,!Array.isArray(e._value))return;const o=e._value.filter((e=>!t.detail.includes(e)));e.input([...o])})),r.addEventListener("dndDrop",(t=>{e.props.dropped=!0,e.input([...t.detail])})),n.addEventListener("dndDragStart",(t=>{e.props.isSourceOption=!0,c(t)})),r.addEventListener("dndDragStart",(t=>{e.props.isSourceOption=!1,c(t)})),document.addEventListener("dndDrop",(()=>{e.props.selections=[],e.props.trackHover=!0})),oo(n,o.bind(null,e),{accepts:[r],dropBehavior:"append",childIsDraggable:f,isDisabled:m.bind(null,e)},l.bind(null,e)),oo(r,t.bind(null,e),{accepts:[r,n],childIsDraggable:f,isDisabled:g.bind(null,e)},p.bind(null,e)))}))}));const $=t=>{e.props.mouseX=t.clientX,e.props.mouseY=t.clientY;const o=e.props.mouseOnSource?`${e.props.id}_source_list_items`:`${e.props.id}`,n=document.getElementById(o);if(n){const o=n.getBoundingClientRect();t.clientX>o.x&&t.clientX<o.x+o.width&&t.clientY>o.y&&t.clientY<o.y+o.height&&(e.props.trackHover=!0)}};document.addEventListener("mousemove",$)}}})),e.on("commit",(({payload:n})=>{if(n===bp.get(e)&&void 0!==bp.get(e))return;if(bp.set(e,n),void 0===e.props.options&&(e.props.options=[]),void 0===e.props.sourceOptions&&(e.props.sourceOptions=[...e.props.options]),xp&&void 0!==n&&"function"==typeof e.props.optionLoader){const r=o(e);if(e.props.multiple&&Array.isArray(n))if(n.forEach((t=>{T(e,t,Array.isArray(r)&&r.find((e=>$o(v(e),t))))})),e.props.loadingCounter){e.props.isLoadingOption=!0;const n=e.on("prop:loadingCounter",(()=>{e.props.loadingCounter||(e.props.isLoadingOption=!1,t(e,o(e)),e.off(n))}))}else t(e,o(e));return}const r=o(e);if(!xp||r||void 0===n||e.props.options&&e.props.options.length||"function"!=typeof e.props.optionsLoader)t(e,r);else{const n=h(e);t(e),n.then((()=>{t(e,o(e))}))}})),e.on("prop:options",(({payload:t})=>{e.props.sourceOptions=[...t].filter((t=>!e.props.targetOptionValues.includes(v(t))))})),e.on("prop:inputText",(({payload:t})=>{t||(e.props.initialOptions.length&&(e.props.options=[...e.props.initialOptions]),e.props.optionsLoader&&(e.props.page=1,e.props.options=[],e.props.search=void 0,h(e)))})),e.on("prop:activeValue",(({payload:t})=>{if(t===_n)return void(e.props.activeDescendant=`${e.props.id}_load_more`);const o=e.props.options.findIndex((e=>$o(v(e),t)));if(o>=0)e.props.activeDescendant=`${e.props.id}_source_list_item_${o}`;else{const o=e.props.targetOptions.findIndex((e=>$o(v(e),t)));if(!o)return void(e.props.activeDescendant=void 0);e.props.activeDescendant=o}})),e.on("prop:mouseOnSource",(({payload:t})=>{if(t&&!0!==e.props.disabled){const t=document.getElementById(e.props.id+"_source_list_items");if(!t)return;e.props.mouseOnTarget=!1,gp.delete(e),p(t)}})),e.on("prop:mouseOnTarget",(({payload:t})=>{if(t&&!0!==e.props.disabled){const t=document.getElementById(`${e.props.id}`);if(!t)return;e.props.mouseOnSource=!1,$p.delete(e),p(t)}})),e.on("prop:loadingCounter",(({payload:t})=>{0===t&&e.store.set(kn)})),e.on("prop:loadingCounter",(({payload:t})=>{0===t&&e.store.set(kn)}))},Ao,Oo("moveRight","right"),Oo("moveLeft","left"),Oo("fastForward","fastForward"),Oo("rewind","rewind"),Oo("close","close"),Oo("loader","spinner"),Oo("selected","check"),Co("isLoading"),Co("loadMore"),Co("addAllValues"),Co("addSelectedValues"),Co("removeSelectedValues"),Co("removeAllValues")]};var kp=Object.freeze({__proto__:null,dropdown:jn,toggle:dr,repeater:Nr,rating:rs,autocomplete:Vs,datepicker:Dl,taglist:Ul,mask:vi,transferlist:wp});const _p=setInterval,Dp=952679114,Ep=451228594,Tp=32863693,Lp=13919,Mp=new WeakSet;export{m as $if,Vs as autocomplete,c as createBaseSections,mo as createProPlugin,u as createSectionFactory,Dl as datepicker,jn as dropdown,kp as inputs,vi as mask,rs as rating,Nr as repeater,Ul as taglist,dr as toggle,wp as transferlist};
